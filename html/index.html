<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="description"
    content="Author: Joel Lustgarten, Organization: Technical training center, Area: MA-AA/TSS2-LA, Company: Robert Bosch Ltda., Country: Brazil, Content: Technical training material" />
  <meta name="google-site-verification" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="all" />
  <meta name="googlebot" content="noarchive" />
  <meta name="googlebot" content="notranslate" />
  <meta name="google" content="nopagereadaloud" />
  <meta http-equiv="imagetoolbar" content="no" />
  <meta name="rating" content="general" />
  <meta http-equiv="pragma" content="no-cache" />
  <meta name="copyright" content="Â© Robert Bosch Ltda." />
  <meta name="keywords" content="Bosch, Technical training, Techical training center, Mechanics" />
  <link rel="icon" type="image/x-icon" href="../assets/favicons/favicon.ico" />
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <title>CTA | Training Planner</title>
</head>
<style>
  .background-wrapper {
    position: relative;
    height: auto;
    min-height: 100vh;
  }

  main {
    padding-top: 5rem;
  }

  .dashboard-container {
    /* Subtle shadow */
    overflow: hidden;
    /* Prevent overflow */
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 80vh;
    /* Adjust height as needed */
    margin: 1rem auto;
    /* Center container with margin */
    max-width: 1200px;
    /* Optional maximum width */

  }

  /* Common styling for both rows */
  .dashboard-row {
    display: flex;
    width: 100%;
  }

  /* Upper row takes 35% of the container's height */
  .upper-row {
    flex: 1 1 35%;
    gap: 10px;
  }

  /* Lower row takes 65% of the container's height */
  .lower-row {
    flex: 1 1 65%;
    gap: 10px;
  }

  /* Card styling */
  .card {
    background-color: var(--bosch-white);
    flex: 1;
    margin: 0.5rem;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
  }

  .upper-row .card {
    height: 150px;
    justify-content: space-between;
    padding: 1rem;
  }

  /* Header: icon and title on the upper part of the card */
  .card-header {
    display: flex;
    align-items: center;
  }

  /* Title styling */
  .card-title {
    font-size: 1.7rem;
    font-weight: bold;
    color: var(--bosch-blue-40);
  }

  /* Value section: big number centered */
  .card-value span {
    font-size: 3rem;
    text-align: center;
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .lower-row .card {
    height: 430px;
    border-radius: 8px;
  }

  .a-notification {
    display: none;
    flex-direction: row;
    position: absolute;
    width: 1000px;
  }

  /* Responsive adjustments for smaller screens */
  @media (max-width: 768px) {
    .dashboard-row {
      flex-wrap: wrap;
    }
  }

  @media(min-width: 1500px) {
    .e-container>* {
      max-width: 90rem;
    }

    main {
      padding-top: 7rem;
    }
  }

  /* Stack cards vertically on narrow viewports */
  .upper-row .card,
  .lower-row .card {
    flex: 1 1 100%;
    margin: 0.5rem 0;
  }

  @media(min-width: 1600px) {
    .upper-row .card {
      height: 250px;
    }
  }

  .card.a-box h5 {
    margin: 0.5rem auto 0.5rem auto;
  }

  .m-dialog__header {
    justify-content: center;
    gap: 20px;
  }

  .dialog__headline {
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: 30px
  }

  .a-list.dashboard {
    margin-bottom: 0;
    padding-inline-start: 0 !important;
  }

  .side_stripe {
    width: 10px;
    height: auto;
  }

  .side_stripe.alert {
    background-color: var(--major-signal-error__enabled__fill__default);
  }

  .side_stripe.notification {
    background-color: var(--minor-accent__enabled__front__default);
  }

  .side_stripe.warning {
    background-color: var(--minor-signal-warning__enabled__fill__default);
  }

  .side_stripe.succes {
    background-color: var(--major-signal-success__enabled__fill__default);
  }

  .a-menu-item.-indent.status {
    display: flex;
    border-bottom: solid 1px;
    border-top: solid 1px;
  }


  .a-menu-item__wrapper.status_message {
    width: 100%;
  }


  #donut-chart-container {
    width: 340px;
    /* Adjust the width as needed */
    height: 340px;
    /* Adjust the height as needed */
    margin: 2rem auto;
    /* Center the container horizontally with some vertical spacing */
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Make sure the canvas takes the container's dimensions */
  #donutChart {
    width: 100%;
    height: 100%;
  }

  /* Styling for notifications */
  #notification-container {
    position: fixed;
    top: 10px;
    right: 10px;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    z-index: 1000;
    /* By default hidden */
    display: none;
  }

  #notification-container.info {
    background-color: #2196F3;
    color: #fff;
  }

  #notification-container.success {
    background-color: #4CAF50;
    color: #fff;
  }

  #notification-container.error {
    background-color: #F44336;
    color: #fff;
  }

  #notification-container.loading {
    background-color: #555;
    color: #fff;
  }
</style>

<body>
  <div class="wrapper -light-mode" style="width: 100vw; height: 100vh">
    <div class="background-wrapper -primary" style="background-color: var(--bosch-gray-95) !important;">
      <header class="o-minimal-header -primary">
        <div class="o-minimal-header__supergraphic"></div>
        <div class="o-minimal-header__top">
          <div class="o-minimal-header__burger">
            <button type="button" class="a-button a-button--integrated -without-label" aria-label="Side Navigation">
              <i class="a-icon a-button__icon ui-ic-menu"></i>
            </button>
          </div>
          <div class="o-minimal-header__title" data-i18n="main_title"></div>
          <ul class="o-minimal-header__actions">
            <li>
              <button type="button" class="a-button a-button--integrated -without-label"
                style="align-items: center; text-align: center; margin-right: 30px;" id="userButton">
                <i class="a-icon a-button__icon boschicon-bosch-ic-my-brand-frame"></i>
                <span style="white-space: nowrap;">User: <span style="white-space: nowrap;"
                    id="username_display"></span></span>
              </button>
            </li>
            <li>
              <button type="button" class="a-button a-button--integrated -without-label" id="logoutButton"
                style="align-items: center; text-align: center; margin-right: 30px;">
                <i class="a-icon a-button__icon boschicon-bosch-ic-logout"></i>
                <span style="white-space: nowrap;">Log out</span>
              </button>
            </li>
          </ul>
          <a href="/" class="o-minimal-header__logo" aria-label="Bosch Logo">
            <svg width="108px" height="24px" viewBox="0 0 108 24" xmlns="http://www.w3.org/2000/svg">
              <path id="bosch-logo-text"
                d="M78.19916,15.03735c0,3.46057-3.1618,5.1535-6.12445,5.1535c-3.41083,0-5.17847-1.29462-6.57263-2.96265 l2.51453-2.48962c1.07056,1.36926,2.46472,2.0415,4.0083,2.0415c1.29462,0,2.14105-0.62244,2.14105-1.56848 c0-0.99585-0.77179-1.31952-2.83813-1.74274l-0.54773-0.12451c-2.48962-0.52283-4.53113-1.91699-4.53113-4.75519 c0-3.112,2.53943-4.97925,5.87549-4.97925c2.8382,0,4.65564,1.21991,5.77594,2.48962l-2.46472,2.43988 c-0.82831-0.91748-2.00061-1.44946-3.23651-1.46893c-0.89624,0-1.91699,0.42328-1.91699,1.46893 c0,0.97095,1.07056,1.31946,2.41492,1.59332l0.54773,0.12451C75.51038,10.73029,78.24896,11.42737,78.19916,15.03735z  M64.80499,11.92529c0,4.65558-2.66394,8.29047-7.26971,8.29047c-4.58093,0-7.26971-3.63489-7.26971-8.29047 c0-4.63068,2.68878-8.29047,7.26971-8.29047C62.14105,3.63483,64.80499,7.29462,64.80499,11.92529z M60.92114,11.92529 c0-2.46472-1.1452-4.48132-3.38586-4.48132s-3.36102,1.9917-3.36102,4.48132s1.12036,4.50623,3.36102,4.50623 S60.92114,14.43982,60.92114,11.92529z M87.06226,16.43152c-1.74274,0-3.56018-1.44397-3.56018-4.60583 c0-2.81323,1.69293-4.38171,3.46057-4.38171c1.39423,0,2.21576,0.64728,2.8631,1.76764l3.18671-2.11621 c-1.59338-2.41492-3.48547-3.43567-6.09961-3.43567c-4.78009,0-7.36926,3.70953-7.36926,8.19086 c0,4.70544,2.86304,8.39008,7.31946,8.39008c3.13696,0,4.63074-1.09546,6.24902-3.43567l-3.21167-2.16602 C89.25311,15.68463,88.55603,16.43152,87.06226,16.43152z M48.97095,15.46057c0,2.66388-2.43982,4.40662-4.92944,4.40662H35.9502 V4.0332h7.44397c2.8382,0,4.9046,1.44397,4.9046,4.35681c0.01666,1.43036-0.85675,2.72058-2.19086,3.23651 C46.10791,11.65143,48.97095,12.29877,48.97095,15.46057z M39.80914,10.25726h2.83813 c0.02155,0.00134,0.04309,0.00226,0.06464,0.00269c0.81476,0.01575,1.48804-0.6319,1.50385-1.44666 c0.00342-0.0567,0.00342-0.11353,0-0.17017c-0.047-0.77802-0.71576-1.37061-1.49377-1.32361h-2.88794L39.80914,10.25726z  M44.76349,14.98755c0-0.92114-0.67218-1.54358-2.09131-1.54358h-2.81323v3.11206h2.88794 C43.91699,16.55603,44.76349,16.13275,44.76349,14.98755z M103.64313,4.03326v5.82568H98.8382V4.03326h-4.15771v15.83398h4.15771 v-6.24896h4.80493v6.24896h4.15771V4.03326H103.64313z" />
              <path id="bosch-logo-anker"
                d="M12,0C5.37256,0,0,5.37256,0,12c0,6.62738,5.37256,12,12,12s12-5.37262,12-12C23.99646,5.37402,18.62598,0.00354,12,0z  M12,22.87964C5.99133,22.87964,1.12036,18.00867,1.12036,12S5.99133,1.1203,12,1.1203S22.87964,5.99133,22.87964,12 C22.87354,18.0061,18.0061,22.87354,12,22.87964z M19.50293,7.05475c-0.66852-1.01306-1.53552-1.88-2.54858-2.54852h-0.82159 v4.10785H7.89209V4.50623H7.04565c-4.13873,2.73114-5.27972,8.30029-2.54858,12.43896 c0.66852,1.01306,1.53552,1.88007,2.54858,2.54858h0.84644v-4.10791h8.24066v4.10791h0.82159 C21.09308,16.76257,22.23407,11.19348,19.50293,7.05475z M6.74689,17.87549c-3.24493-2.88354-3.5379-7.85168-0.65436-11.09668 c0.20508-0.23077,0.42358-0.44928,0.65436-0.65436V17.87549z M16.13275,14.24066H7.89209V9.73444h8.24066V14.24066z  M17.84827,17.25549c-0.18768,0.2088-0.38629,0.40747-0.59515,0.59509v-2.48962V8.61407V6.12445 C20.49121,9.03387,20.75763,14.0174,17.84827,17.25549z" />
            </svg>
          </a>
          <div class="o-minimal-header__falafel">
            <nav class="o-context-menu" aria-label="Context Menu Navigation undefined" aria-hidden="false">
              <button type="button" class="a-button a-button--integrated -without-label o-context-menu__trigger"
                data-frok-action="open" aria-haspopup="true" aria-label="Open Context Menu">
                <i class="a-icon a-button__icon boschicon-bosch-ic-options"></i>
              </button>
              <button type="button" class="a-button a-button--integrated -without-label o-context-menu__trigger"
                data-frok-action="close" aria-haspopup="false" aria-label="Close Context Menu">
                <i class="a-icon a-button__icon boschicon-bosch-ic-close"></i>
              </button>
              <div class="m-popover">
                <div class="a-box -floating">
                  <div class="m-popover__content">
                    <ul class="m-menu-group" role="menubar" aria-orientation="vertical">
                      <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                          <button href="#" role="menuitem" class="a-menu-item__link" id="smallLogoutButton">
                            <i class="a-icon boschicon-bosch-ic-my-brand-frame"></i>
                            <span class="a-menu-item__label">Log out</span>
                          </button>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </nav>
          </div>
        </div>
      </header>
      <nav class="m-side-navigation -contrast" aria-label="Side Navigation" aria-hidden="false">
        <div class="m-side-navigation__header">
          <div class="m-side-navigation__header__label -size-l highlight">
            Training Planner V1.00
          </div>
          <button type="button"
            class="a-button a-button--integrated -without-label m-side-navigation__header__trigger -open"
            aria-haspopup="false" aria-label="Open Side Navigation" tabindex="0">
            <i class="a-icon a-button__icon boschicon-bosch-ic-list-view-mobile"></i>
          </button>
          <button type="button"
            class="a-button a-button--integrated -without-label m-side-navigation__header__trigger -close"
            aria-haspopup="false" aria-label="Close Side Navigation" tabindex="-1">
            <i class="a-icon a-button__icon boschicon-bosch-ic-close"></i>
          </button>
        </div>
        <ul class="m-menu-group" role="menubar" aria-orientation="vertical">
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false" id='login_btn'
                data-target="nonav">
                <i class="a-icon boschicon-bosch-ic-login"></i>
                <span class="a-menu-item__label">Login</span>
              </a>
            </div>
          </li>
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false" data-target="index.html">
                <i class="a-icon boschicon-bosch-ic-desktop-application-3d"></i>
                <span class="a-menu-item__label">Home</span>
              </a>
            </div>
          </li>
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="false"
                aria-controls="group-id-1" aria-label="open group">
                <i class="a-icon boschicon-bosch-ic-calendar-date-single"></i>
                <span class="a-menu-item__label" data-i18n="event-menu"></span>
                <i class="a-icon ui-ic-down-small"></i>
              </button>
            </div>
            <ul id="group-id-1" class="m-menu-group__group" role="menu">
              <li class="a-menu-item -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="view_event.html">
                    <span class="a-menu-item__label" data-i18n="event-menu-1"></span>
                  </a>
                </div>
              </li>
              <li class="a-menu-item -disabled -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="true" tabindex="-1"
                    data-target="new_event.html">
                    <span class="a-menu-item__label" data-i18n="event-menu-2"></span>
                  </a>
                </div>
              </li>
              <li class="a-menu-item -disabled -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="update_event.html">
                    <span class="a-menu-item__label" data-i18n="event-menu-3"></span>
                  </a>
                </div>
              </li>
            </ul>
          </li>
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="true" tabindex="-1"
                aria-controls="group-id-2" aria-label="open group">
                <i class="a-icon boschicon-bosch-ic-material-list"></i>
                <span class="a-menu-item__label" data-i18n="resources-menu"></span>
                <i class="a-icon ui-ic-down-small"></i>
              </button>
            </div>
            <ul id="group-id-2" class="m-menu-group__group" role="menu">
              <li class="a-menu-item -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="view_resources.html">
                    <span class="a-menu-item__label" data-i18n="resources-menu-1"></span>
                  </a>
                </div>
              </li>
              <li class="a-menu-item -disabled -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="new_resources.html">
                    <span class="a-menu-item__label" data-i18n="resources-menu-2"></span>
                  </a>
                </div>
              </li>
              <li class="a-menu-item -disabled -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="update_resources.html">
                    <span class="a-menu-item__label" data-i18n="resources-menu-3"></span>
                  </a>
                </div>
              </li>
            </ul>
          </li>
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="false"
                aria-controls="group-id-3" aria-label="open group">
                <i class="a-icon boschicon-bosch-ic-message"></i>
                <span class="a-menu-item__label" data-i18n="message-menu"></span>
                <i class="a-icon ui-ic-down-small"></i>
              </button>
            </div>
            <ul id="group-id-3" class="m-menu-group__group" role="menu">
              <li class="a-menu-item -disabled -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="view_messages.html">
                    <span class="a-menu-item__label" data-i18n="message-menu-1"></span>
                  </a>
                </div>
              </li>
              <li class="a-menu-item -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="reminders.html">
                    <span class="a-menu-item__label" data-i18n="message-menu-2"></span>
                  </a>
                </div>
              </li>
            </ul>
          </li>
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false" data-target="settings.html">
                <i class="a-icon boschicon-bosch-ic-settings"></i>
                <span class="a-menu-item__label" data-i18n="settings-link"></span>
              </a>
            </div>
          </li>
          <li class="a-menu-item -disabled" role="none">
            <div class="a-menu-item__wrapper">
              <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="true" tabindex="-1"
                data-target="statistic.html">
                <i class="a-icon boschicon-bosch-ic-chart-line"></i>
                <span class="a-menu-item__label" data-i18n="statistics-link"></span>
              </a>
            </div>
          </li>
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false" data-target="version.html"">
                <i class=" a-icon boschicon-bosch-ic-alert-info"></i>
                <span class="a-menu-item__label" data-i18n="version-link"></span>
              </a>
            </div>
          </li>
        </ul>
      </nav>
      <div class="e-container">
        <main>
          <!-- Login dialog-->
          <dialog class="m-dialog -floating-shadow-s -floating" id="alert-dialog-info-without-close-button"
            aria-labelledby="dialog-alert-dialog-info-without-close-button-title" style="max-width: 30rem !important;">
            <div class="m-dialog__remark --info"></div>
            <div class="m-dialog__header">
              <i class="a-icon ui-ic-alert-info"></i>
              <div class="m-dialog__title" data-i18n="login_title"></div>
            </div>
            <hr class="a-divider" />
            <div class="m-dialog__content">
              <div class="m-dialog__headline" id="dialog-alert-dialog-info-without-close-button-title"
                data-i18n="login_subtitle">
              </div>
              <div class="m-dialog__body" id="dialog-alert-dialog-info-without-close-button-description"
                data-i18n="login_inst">
              </div>
              <form id="login_form">
                <div class="a-text-field">
                  <label for="text-input-code" data-i18n="user_code"></label>
                  <input type="text" id="text-input-code" name="input text with label" value="" />
                </div>
                <div class="m-dialog__code" id="m-dialog__code"></div>
                <div class="m-dialog__actions">
                  <button type="button" class="a-button a-button--primary -without-icon" id="loginConfirm">
                    <span class="a-button__label" data-i18n="login_confirm_btn"></span>
                  </button>
                  <button type="button" class="a-button a-button--secondary -without-icon" id="loginCancel">
                    <span class="a-button__label" data-i18n="login_cancel_btn"></span>
                  </button>
                </div>
              </form>
            </div>
          </dialog>

          <div class="dashboard-container">
            <!-- Upper row: 35% height with 3 cards -->
            <div class="dashboard-row upper-row">
              <div class="card a-box">
                <div class="card-header">
                  <i class="a-icon a-button__icon boschicon-bosch-ic-technical-training-at-vehicle" style="font-size: 2.5rem;
                  margin-right: 0.5rem; color: var(--bosch-blue-50);"></i>
                  <span class="card-title" data-i18n="planned-events-card"></span>
                </div>
                <div class="card-value">
                  <span id="planned"></span>
                </div>
              </div>
              <div class="card a-box">
                <div class="card-header">
                  <i class="a-icon a-button__icon boschicon-bosch-ic-checkmark" style="font-size: 2.5rem;
                  margin-right: 0.5rem; color: var(--bosch-blue-50);"></i>
                  <span class="card-title" data-i18n="performed-events-card"></span>
                </div>
                <div class="card-value">
                  <span id="performed"></span>
                </div>
              </div>
              <div class="card a-box">
                <div class="card-header">
                  <i class="a-icon a-button__icon boschicon-bosch-ic-user" style="font-size: 2.5rem;
                  margin-right: 0.5rem; color: var(--bosch-blue-50);"></i>
                  <span class="card-title" data-i18n="participant-card"></span>
                </div>
                <div class="card-value">
                  <span id="participants"></span>
                </div>
              </div>
            </div>
            <!-- Lower row: 65% height with 2 cards -->
            <div class="dashboard-row lower-row">
              <div class="card a-box m-dialog">
                <div class="m-dialog__header">
                  <i class="a-icon ui-ic-alert-info"></i>
                  <div class="m-dialog__title" data-i18n="index-message-cont-title"></div>
                </div>
                <hr class="a-divider" />
                <div class="m-dialog__content">
                  <div class="dialog__headline" data-i18n="index-message-cont-subtitle"></div>
                  <ul class="a-list dashboard">
                    <li class="a-menu-item -indent status" role="none" style="padding-left: 0;">
                      <div class="side_stripe notification"></div>
                      <div class="a-menu-item__wrapper status_message">
                        <i class="a-icon a-menu-item__state boschicon-bosch-ic-calendar-date-single"
                          style="color: var(--bosch-blue-50);"></i>
                        <button type="button" role="menuitem" class="a-menu-item__side-menu dashboard_button"
                          aria-disabled="false" aria-label="open group" data-button="deadline">
                          <span class="a-menu-item__label" data-i18n="deadline-label"></span>
                          <i class="a-icon boschicon-bosch-ic-alert-warning" style="color: var(--bosch-blue-50);"></i>
                          <span class="a-menu-item__label" data-i18n="deadline-label-warning"></span>
                          <div class="a-badge" role="status" aria-live="off" id="badge_deadline"></div>
                          <i class="a-icon ui-ic-nosafe-lr-right-small"></i>
                        </button>
                      </div>
                    </li>
                    <li class="a-menu-item -indent status" role="none" style="padding-left: 0;">
                      <div class="side_stripe alert"></div>
                      <div class="a-menu-item__wrapper status_message">
                        <i class="a-icon a-menu-item__state boschicon-bosch-ic-people"
                          style="color: var(--bosch-red-50);"></i>
                        <button type="button" role="menuitem" class="a-menu-item__side-menu dashboard_button"
                          aria-disabled="false" aria-label="open group" data-button="participants">
                          <span class="a-menu-item__label" data-i18n="participant-label"></span>
                          <i class="a-icon boschicon-bosch-ic-alert-error" style="color: var(--bosch-red-50);"></i>
                          <span class="a-menu-item__label" data-i18n="participant-label-alert"></span>
                          <div class="a-badge" role="status" aria-live="off" id="badge_participants"></div>
                          <i class="a-icon ui-ic-nosafe-lr-right-small"></i>
                        </button>
                      </div>
                    </li>
                    <li class="a-menu-item -indent status" role="none" style="padding-left: 0;">
                      <div class="side_stripe warning"></div>
                      <div class="a-menu-item__wrapper status_message">
                        <i class="a-icon a-menu-item__state boschicon-bosch-ic-paperplane"
                          style="color: var(--bosch-yellow-70);"></i>
                        <button type="button" role="menuitem" class="a-menu-item__side-menu dashboard_button"
                          aria-disabled="false" aria-label="open group" data-button="messages">
                          <span class="a-menu-item__label" data-i18n="Message-label"></span>
                          <i class="a-icon boschicon-bosch-ic-alert-info" style="color: var(--bosch-yellow-70);"></i>
                          <span class="a-menu-item__label" data-i18n="message-label-warning"></span>
                          <div class="a-badge" role="status" aria-live="off" id="badge_messages"></div>
                          <i class="a-icon ui-ic-nosafe-lr-right-small"></i>
                        </button>
                      </div>
                    </li>
                    <li class="a-menu-item -indent status" role="none" style="padding-left: 0;">
                      <div class="side_stripe succes"></div>
                      <div class="a-menu-item__wrapper status_message">
                        <i class="a-icon a-menu-item__state ui-ic-checkmark"></i>
                        <button type="button" role="menuitem" class="a-menu-item__side-menu dashboard_button"
                          aria-disabled="false" aria-label="open group" id="schedulle">
                          <i class="a-icon boschicon-bosch-ic-calendar"></i>
                          <span class="a-menu-item__label" data-i18n="calendar-label"></span>
                          <span class="a-menu-item__label" data-i18n="calendar-label-warning"></span>
                          <div class="a-badge" role="status" aria-live="off" data-count="i">i</div>
                          <i class="a-icon ui-ic-nosafe-lr-right-small"></i>
                        </button>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="card a-box">
                <h5 data-i18n="chart-title"></h5>
                <div class="chart_container" id="donut-chart-container">
                  <canvas id="donutChart"></canvas>
                </div>
              </div>
            </div>
            <div class="a-notification -neutral" id="deadline" role="alert">
              <div id="deadline_warning_container" class="a-notification__content">

              </div>
            </div>
            <div class="a-notification -error" id="participants" role="alert">
              <div id="participant_warning_container" class="a-notification__content">

              </div>
            </div>
            <div class="a-notification -warning" id="messages" role="alert">
              <div id="messages_warning_container" class="a-notification__content">

              </div>
            </div>
            <div class="a-notification -success" id="other" role="alert">
              <div id="other_warning_container" class="a-notification__content">

              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
  </div>
  <script src="../js/script.js"></script>
  <script src="../js/chart.min.js"></script>
  <script type="module">
    import { setLanguage, updateLanguage, setTheme, updateUsernameDisplay, logOut, login, updateNavMenu, navigationMenu, debounce, getNotificationContainer, showPersistentNotification, hidePersistentNotification, showNotification, createChart } from '../js/common.js';
    setLanguage();
    setTheme();
    updateUsernameDisplay();
    updateNavMenu();
    navigationMenu();

    document.getElementById('logoutButton').addEventListener('click', logOut);
    document.getElementById('smallLogoutButton').addEventListener('click', logOut);

    document.getElementById('login_btn').addEventListener('click', () => {
      event.preventDefault();
      document.getElementById('alert-dialog-info-without-close-button').showModal();
    });

    document.getElementById('loginCancel').addEventListener('click', (event) => {
      event.preventDefault();
      document.getElementById('alert-dialog-info-without-close-button').close();
    });

    document.getElementById('loginConfirm').addEventListener('click', login);

    document.getElementById('schedulle').addEventListener('click', async () => {
      await window.api.openPopup();
    });


  </script>
  <script>

    document.addEventListener('DOMContentLoaded', function () {
      initializeData();
      initializeNotifications();
      getEventWarningStatus();
      getParticipanttWarningStatus();
      getMessageCount();

      /**
         * Define graph type and style
         * 1. Retrieves the start (Monday) and end (Sunday) dates of a selected week
         * 2. 
         * @param input {event}
         * @param output {none}
         */
      const ctx = document.getElementById('donutChart').getContext('2d');

      const data = {
        //labels: ['Red', 'Blue', 'Yellow', 'Green'],
        labels: [],
        datasets: [{
          //data: [300, 50, 100, 150],
          data: [],
          backgroundColor: [
            'rgba(255, 99, 132, 0.7)',
            'rgba(54, 162, 235, 0.7)',
            'rgba(255, 206, 86, 0.7)',
            'rgba(75, 192, 192, 0.7)'
          ],
          hoverBackgroundColor: [
            'rgba(255, 99, 132, 1)',
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)'
          ]
        }]
      };

      const options = {
        responsive: true,
        maintainAspectRatio: false,
        // Set the cutout percentage to adjust the thickness of the donut
        cutout: '70%',
        plugins: {
          legend: {
            position: 'bottom'
          }
        }
      };

      const donutChart = new Chart(ctx, {
        type: 'doughnut',
        data: data,
        options: options
      });

      updateData(donutChart);

      // Asynchronous function to fetch data, compute percentages, and update the chart and table
      async function updateData(chart) {
        try {
          // Fetch events from your preload API
          const rows = await window.api.getEventType();
          const totalEvents = rows.length;
          if (totalEvents === 0) return; // Handle no data case

          // Count the occurrences of each event type
          const counts = {};
          rows.forEach(row => {
            const type = row.event_type;
            counts[type] = (counts[type] || 0) + 1;
          });

          // Calculate percentages and prepare arrays for labels and chart data
          const labels = Object.keys(counts);
          const percentages = labels.map(label => Math.round((counts[label] / totalEvents) * 100));

          // Update chart data
          chart.data.labels = labels;
          chart.data.datasets[0].data = percentages;
          chart.update();

        } catch (error) {
          console.error('Error updating chart data:', error);
        }
      }

    });


    //======================= HELPER FUNCTIONS FOR INDEX ========================= 

    function formatDate(dateInput) {
      const date = new Date(dateInput);
      const day = String(date.getDate()).padStart(2, '0');
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const year = date.getFullYear();
      return `${day}/${month}/${year}`;
    }

    /**
    * Fetches card data
    * 1. Retrieves the data to fill card information
    * 2. 
    * @param input {}
    * @param output {count}
    */
    async function initializeData() {
      const plannedFigure = document.getElementById('planned');
      const performedFigure = document.getElementById('performed');
      const participantFigure = document.getElementById('participants');

      showPersistentNotification("Retrieving data...", "loading");

      try {

        const resultPlanned = await window.api.getPlCardCount();
        const resultPerformed = await window.api.getExCardCount();
        const resultParticipants = await window.api.getParticipantCount();

        hidePersistentNotification();
        if (resultPlanned && resultPerformed && resultParticipants) {
          showNotification('Card data retrieved', "success");
          plannedFigure.innerText = resultPlanned;
          performedFigure.innerText = resultPerformed;
          participantFigure.innerText = resultParticipants;
        } else {
          showNotification("Error: Error retrieving card data");
        }
      } catch (error) {
        showNotification("An error occurred while retrieving card data. Please try again.", 'error');
      }
    }

    /**
    * Function to display notifications
    * 1. Display notification on button click
    * 2. Set notification position relative to button
    * 
    * @param input {event}
    * @param output {none}
    */
    function initializeNotifications() {
      document.querySelectorAll('.dashboard_button').forEach(button => {
        button.addEventListener('click', function (e) {
          const buttonType = button.getAttribute('data-button');
          const popups = document.querySelectorAll('.a-notification');
          for (const popup of popups) {
            const notification = popup.id;
            if (buttonType === notification) {
              const rect = button.getBoundingClientRect();
              const top = rect.bottom + window.scrollY;
              const left = rect.left + window.scrollX;
              popup.style.top = `${top}px`;
              popup.style.left = `${left}px`;
              popup.style.display = (popup.style.display === 'flex') ? 'none' : 'flex';
            }
          }
        });
      });
    }

    /**
    * Function to fetch event deadline info
    * 1. Retrieves deadline information
    * 2. Calculates warning trigger dates
    * 3. Fill deadline cnotification
    * 
    * @param input {event}
    * @param output {none}
    */
    async function getEventWarningStatus() {
      const badgeDeadline = document.getElementById('badge_deadline');
      const container = document.getElementById('deadline_warning_container');
      const daysBeforeWarning = 15;
      let count = 0;

      const resultWarning = await window.api.getEventWarning();

      const innerContainer = document.createElement('div');
      innerContainer.className = 'a-notification__content';
      const ul = document.createElement('ul');
      ul.className = "a-list a-list--dot";
      ul.style.margin = 0;
      innerContainer.appendChild(ul);
      resultWarning.forEach(row => {
        let message = '';

        if (row.DayDifference > 0 && row.DayDifference <= daysBeforeWarning) {
          const lang = localStorage.getItem('language') || 'en';
          switch (lang) {
            case 'en':
              message = `WARNING: ${row.event_name} confirmation deadline is in ${row.DayDifference} day(s) (${formatDate(row.event_confirmation_deadline)}).`;
              break;
            case 'es':
              message = `ALERTA: ${row.event_name} Plazo de confirmacion es en ${row.DayDifference} dia(s) (${formatDate(row.event_confirmation_deadline)}).`;
              break;
            case 'pt':
              message = `ALERTA: ${row.event_name} Prazo de confirmaÃ§Ã£o es em ${row.DayDifference} dia(s) (${formatDate(row.event_confirmation_deadline)}).`;
              break;
            default:
              message = `WARNING: ${row.event_name} confirmation deadline is in ${row.DayDifference} day(s) (${formatDate(row.event_confirmation_deadline)}).`;
              break;
          }
        }

        // Only add a list item if a message was set
        if (message) {
          const li = document.createElement('li');
          li.textContent = message;
          ul.appendChild(li);
          count++;
        }

      });

      badgeDeadline.innerText = count;
      container.appendChild(ul);
    }

    /**
    * Function to fetch participant warning info
    * 1. Retrieves participant information
    * 2. Calculates warning trigger dates
    * 3. Fill participant notification
    * 
    * @param input {event}
    * @param output {none}
    */
    async function getParticipanttWarningStatus() {
      const badgeParticipants = document.getElementById('badge_participants');
      const container = document.getElementById('participant_warning_container');
      const daysToCheck = 30;
      let count = 0;

      const resultWarning = await window.api.getParticipantWarning();

      const innerContainer = document.createElement('div');
      innerContainer.className = 'a-notification__content';
      const ul = document.createElement('ul');
      ul.className = "a-list a-list--dot";
      ul.style.margin = 0;
      innerContainer.appendChild(ul);
      resultWarning.forEach(row => {
        if (row.inscribed_participants < row.required_participants) {
          let message = '';
          const lang = localStorage.getItem('language') || 'en';

          if (row.DayDifference > 15 && row.DayDifference <= daysToCheck) {
            switch (lang) {
              case 'en':
                message = `WARNING: ${row.event_name} from ${formatDate(row.event_start_date)} have ${row.inscribed_participants} inscribed participants, the lowest is set to (${row.required_participants} participants).`;
                break;
              case 'es':
                message = `ADVERTENCIA: ${row.event_name} de ${formatDate(row.event_start_date)} tiene ${row.inscribed_participants} participantes inscritos, el numero minimo esta definido como (${row.required_participants} participantes).`;
                break;
              case 'pt':
                message = `ADVERTENCIA: ${row.event_name} do ${formatDate(row.event_start_date)} tem ${row.inscribed_participants} participantes registrados, o minimo fica definido em (${row.required_participants} participantes).`;
                break;
              default:
                message = `WARNING: ${row.event_name} from ${formatDate(row.event_start_date)} have ${row.inscribed_participants} inscribed participants, the lowest is set to (${row.required_participants} participants).`;
                break;
            }
        } else if (row.DayDifference <= 15) {
          switch (lang) {
              case 'en':
                message = `ALERT: ${row.event_name} from ${formatDate(row.event_start_date)} have ${row.inscribed_participants} inscribed participants, the lowest is set to (${row.required_participants} participants).`;
                break;
              case 'es':
                message = `ALERTA: ${row.event_name} de ${formatDate(row.event_start_date)} tiene ${row.inscribed_participants} participantes inscritos, el numero minimo esta definido como (${row.required_participants} participantes).`;
                break;
              case 'pt':
                message = `ALERTA: ${row.event_name} do ${formatDate(row.event_start_date)} tem ${row.inscribed_participants} participantes registrados, o minimo fica definido em (${row.required_participants} participantes).`;
                break;
              default:
                message = `ALERTA: ${row.event_name} from ${formatDate(row.event_start_date)} have ${row.inscribed_participants} inscribed participants, the lowest is set to (${row.required_participants} participants).`;
                break;
            }
        }
        // Only add a list item if a message was set
        if (message) {
          const li = document.createElement('li');
          li.textContent = message;
          ul.appendChild(li);
          count++;
        }
      }
      });

    badgeParticipants.innerText = count;
    container.appendChild(ul);
    }


    /**
       * Function to fetch participant warning info
       * 1. Retrieves participant information
       * 2. Calculates warning trigger dates
       * 3. Fill participant notification
       * 
       * @param input {event}
       * @param output {none}
       */
    async function getMessageCount() {
      const badgeMessages = document.getElementById('badge_messages');
      const container = document.getElementById('messages_warning_container');

      const resultWarning = await window.api.getMessageStatus();
      const content = document.createElement('div');
      content.className = "a-notification__content";

      let message = '';
      const lang = localStorage.getItem('language') || 'en';

      if (resultWarning) {
        switch (lang) {
          case 'en':
          message = `There are ${resultWarning} unread messages, please go to 'messages' to review message history`;
          break;
          case 'es':
          message = `Hay ${resultWarning} mensajes sin leer, vaya a 'mensajes' para revisar el historico de mensajes`;
          break;
          case 'pt':
          message = `HÃ¡ ${resultWarning} mensagens nÃ£o lidas, vÃ¡ para 'mensagens' para revisar o histÃ³rico de mensagens`;
          break;
          default:
          message = `There are ${resultWarning} unread messages, please go to 'messages' to review message history`;
        }
        
      }

      if (message) {
        content.textContent = message;
      }

      badgeMessages.innerText = resultWarning;
      container.appendChild(content);
    }

    window.addEventListener('resize', () => {
      console.log("Viewport size: " + window.innerWidth + " x " + window.innerHeight);
    });


  </script>
</body>

</html>