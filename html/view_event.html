<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="description"
        content="Author: Joel Lustgarten, Organization: Technical training center, Area: MA-AA/TSS2-LA, Company: Robert Bosch Ltda., Country: Brazil, Content: Technical training material" />
    <meta name="google-site-verification" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="all" />
    <meta name="googlebot" content="noarchive" />
    <meta name="googlebot" content="notranslate" />
    <meta name="google" content="nopagereadaloud" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta name="rating" content="general" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="copyright" content="Â© Robert Bosch Ltda." />
    <meta name="keywords" content="Bosch, Technical training, Techical training center, Mechanics" />
    <link rel="icon" type="image/x-icon" href="../assets/favicons/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="../css/main.css" />
    <title>CTA | Training Planner</title>
</head>
<style>
    .background-wrapper {
        position: relative;
        height: auto;
        min-height: 100vh;
    }

    .e-container>* {
        max-width: 90rem !important;
    }

    .e-container {
        max-width: 90rem !important;
    }

    .preview-single {
        display: flex;
        flex-direction: column;
        width: 100%;
        height: 100%;
        /* Ensure it takes full height of the parent */
    }

    .date_container {

        padding: 1rem;
        display: flex;
        justify-content: center;
        /* Center content horizontally */
        align-items: center;
        /* Center content vertically */
        height: auto;
        /* Height based on content */
    }

    .notification-button {
        cursor: pointer;
    }

    .notification-button:hover {
        background-color: var(--minor-signal-neutral__enabled__fill__hovered);

    }

    .notification-button:active {
        background-color: var(--minor-signal-neutral__enabled__fill__pressed);
    }

    .view_container {
        display: flex;
        flex: 1;
        margin-top: 3rem;
        justify-content: space-between;
    }

    .left-container,
    .right-container {
        flex: 1;
        /* Equal size for both containers */
        padding: 1rem;
        box-sizing: border-box;
        /* Include padding in width/height calculations */
        background-color: #fff;
        /* White background for containers */
        border: 1px solid #ccc;
        /* Optional border for visibility */
    }

    .left-container {
        margin-right: 1rem;
        /* Add space between left and right containers */
        margin-left: 1rem;
    }

    .activity-summary-container,
    .right-content {
        /* Subtract the top and bottom margins */
        margin: 1rem;
        overflow-y: auto;
        background-color: #f5f5f5;
        /* Light gray background */
        border-radius: 8px;
        /* Rounded corners */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        /* Subtle shadow */
    }

    .activity-summary-container {
        padding: 0 1rem 1rem 1rem;
    }

    .activity-summary-container h3 {
        font-size: 20px;

    }

    .activity-summary {
        list-style-type: none;
        padding: 0;
    }

    .activity-summary li {
        margin-bottom: 0.5rem;
        padding: 0.5rem;
        background-color: white;
        border-radius: 4px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .right-content {
        display: flex;
        flex-direction: column;
    }

    .upper-row {
        height: 60%;
        padding: 1rem;
        box-sizing: border-box;
    }

    .grid-container {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: repeat(2, 1fr);
        gap: 5px;
        height: 100%;
    }

    .grid-item {
        border: 1px solid black;
        display: flex;
        flex-direction: column;
        /* Change to column layout */
        justify-content: center;
        align-items: center;
        font-size: 0.8rem;
        text-align: center;
        background-color: white;
        cursor: pointer;
        transition: background-color 0.3s ease;
        color: black;
        position: relative;
        overflow: hidden;
        height: 100px;
    }

    .grid-item-title {
        color: black;
        z-index: 1;
        margin-bottom: 5px;
        /* Add some space below the title */
    }

    .event-id {
        color: black;
        font-size: 0.5rem;
        z-index: 1;
        margin: 2px 0;
        /* Add some vertical spacing between event IDs */
    }


    .lower-row {
        height: 40%;
        padding: 1rem;
        box-sizing: border-box;
    }

    .activity-summary-container {
        max-height: 400px;
        overflow-y: auto;
        padding: 1rem;
    }

    .activity-summary-container h3 {
        margin-bottom: 0.5rem;
    }

    .activity-summary-container h4 {
        margin-bottom: 1rem;
        color: #666;
    }

    .activity-summary {
        list-style-type: none;
        padding: 0;
    }

    .a-details {
        margin-bottom: 1rem;
        border: 1px solid #ddd;
        border-radius: 4px;
    }

    .a-details summary {
        padding: 0.5rem;
        background-color: #f5f5f5;
        cursor: pointer;
    }

    .a-details summary:hover {
        background-color: #e5e5e5;
    }

    .a-details[open] summary {
        border-bottom: 1px solid #ddd;
    }

    .a-details div {
        padding: 0.5rem;
    }

    .a-details p {
        margin: 0.25rem 0;
    }

    .lower-row {
        display: flex;
        flex-direction: column;
    }

    .event-actions {
        display: flex;
        align-items: center;
        margin-top: 10px;
        margin-bottom: 20px;
        padding-right: 20px;
        /* Add this line for bottom margin */
    }

    .event-status {
        text-align: center;
        margin-right: auto;
        margin-left: auto;
        width: 100px;
        /* Push it to the left */
    }

    .status-tag {
        text-align: center;
        margin-right: auto;
        margin-left: auto;
        /* Push it to the left */
    }

    .event-summary-block {
        margin: 0;
        padding: 0;
    }

    .event-summary-block p {
        font-size: 0.8rem;
    }

    .event-status-container {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .a-chip:last-of-type {
        margin-left: auto;
        margin-right: auto;
    }

    /* Styling for notifications */
    #notification-container {
        position: fixed;
        top: 10px;
        right: 10px;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        z-index: 1000;
        /* By default hidden */
        display: none;
    }

    #notification-container.info {
        background-color: #2196F3;
        color: #fff;
    }

    #notification-container.success {
        background-color: #4CAF50;
        color: #fff;
    }

    #notification-container.error {
        background-color: #F44336;
        color: #fff;
    }

    #notification-container.loading {
        background-color: #555;
        color: #fff;
    }
</style>

<body>
    <div class="wrapper -light-mode" style="width: 100vw; height: 100vh">
        <div class="background-wrapper -primary">
            <header class="o-minimal-header -primary">
                <div class="o-minimal-header__supergraphic"></div>
                <div class="o-minimal-header__top">
                    <div class="o-minimal-header__burger">
                        <button type="button" class="a-button a-button--integrated -without-label"
                            aria-label="Side Navigation">
                            <i class="a-icon a-button__icon ui-ic-menu"></i>
                        </button>
                    </div>
                    <div class="o-minimal-header__title" data-i18n="event-title"></div>
                    <ul class="o-minimal-header__actions">
                        <li>
                            <button type="button" class="a-button a-button--integrated -without-label" style="
                    align-items: center;
                    text-align: center;
                    margin-right: 30px;
                  " id="userButton">
                                <i class="a-icon a-button__icon boschicon-bosch-ic-my-brand-frame"></i>
                                <span style="white-space: nowrap">User:
                                    <span style="white-space: nowrap" id="username_display"></span></span>
                            </button>
                        </li>
                        <li>
                            <button type="button" class="a-button a-button--integrated -without-label" id="logoutButton"
                                style="
                    align-items: center;
                    text-align: center;
                    margin-right: 30px;
                  ">
                                <i class="a-icon a-button__icon boschicon-bosch-ic-logout"></i>
                                <span style="white-space: nowrap">Log out</span>
                            </button>
                        </li>
                    </ul>
                    <a href="/" class="o-minimal-header__logo" aria-label="Bosch Logo">
                        <svg width="108px" height="24px" viewBox="0 0 108 24" xmlns="http://www.w3.org/2000/svg">
                            <path id="bosch-logo-text"
                                d="M78.19916,15.03735c0,3.46057-3.1618,5.1535-6.12445,5.1535c-3.41083,0-5.17847-1.29462-6.57263-2.96265 l2.51453-2.48962c1.07056,1.36926,2.46472,2.0415,4.0083,2.0415c1.29462,0,2.14105-0.62244,2.14105-1.56848 c0-0.99585-0.77179-1.31952-2.83813-1.74274l-0.54773-0.12451c-2.48962-0.52283-4.53113-1.91699-4.53113-4.75519 c0-3.112,2.53943-4.97925,5.87549-4.97925c2.8382,0,4.65564,1.21991,5.77594,2.48962l-2.46472,2.43988 c-0.82831-0.91748-2.00061-1.44946-3.23651-1.46893c-0.89624,0-1.91699,0.42328-1.91699,1.46893 c0,0.97095,1.07056,1.31946,2.41492,1.59332l0.54773,0.12451C75.51038,10.73029,78.24896,11.42737,78.19916,15.03735z  M64.80499,11.92529c0,4.65558-2.66394,8.29047-7.26971,8.29047c-4.58093,0-7.26971-3.63489-7.26971-8.29047 c0-4.63068,2.68878-8.29047,7.26971-8.29047C62.14105,3.63483,64.80499,7.29462,64.80499,11.92529z M60.92114,11.92529 c0-2.46472-1.1452-4.48132-3.38586-4.48132s-3.36102,1.9917-3.36102,4.48132s1.12036,4.50623,3.36102,4.50623 S60.92114,14.43982,60.92114,11.92529z M87.06226,16.43152c-1.74274,0-3.56018-1.44397-3.56018-4.60583 c0-2.81323,1.69293-4.38171,3.46057-4.38171c1.39423,0,2.21576,0.64728,2.8631,1.76764l3.18671-2.11621 c-1.59338-2.41492-3.48547-3.43567-6.09961-3.43567c-4.78009,0-7.36926,3.70953-7.36926,8.19086 c0,4.70544,2.86304,8.39008,7.31946,8.39008c3.13696,0,4.63074-1.09546,6.24902-3.43567l-3.21167-2.16602 C89.25311,15.68463,88.55603,16.43152,87.06226,16.43152z M48.97095,15.46057c0,2.66388-2.43982,4.40662-4.92944,4.40662H35.9502 V4.0332h7.44397c2.8382,0,4.9046,1.44397,4.9046,4.35681c0.01666,1.43036-0.85675,2.72058-2.19086,3.23651 C46.10791,11.65143,48.97095,12.29877,48.97095,15.46057z M39.80914,10.25726h2.83813 c0.02155,0.00134,0.04309,0.00226,0.06464,0.00269c0.81476,0.01575,1.48804-0.6319,1.50385-1.44666 c0.00342-0.0567,0.00342-0.11353,0-0.17017c-0.047-0.77802-0.71576-1.37061-1.49377-1.32361h-2.88794L39.80914,10.25726z  M44.76349,14.98755c0-0.92114-0.67218-1.54358-2.09131-1.54358h-2.81323v3.11206h2.88794 C43.91699,16.55603,44.76349,16.13275,44.76349,14.98755z M103.64313,4.03326v5.82568H98.8382V4.03326h-4.15771v15.83398h4.15771 v-6.24896h4.80493v6.24896h4.15771V4.03326H103.64313z" />
                            <path id="bosch-logo-anker"
                                d="M12,0C5.37256,0,0,5.37256,0,12c0,6.62738,5.37256,12,12,12s12-5.37262,12-12C23.99646,5.37402,18.62598,0.00354,12,0z  M12,22.87964C5.99133,22.87964,1.12036,18.00867,1.12036,12S5.99133,1.1203,12,1.1203S22.87964,5.99133,22.87964,12 C22.87354,18.0061,18.0061,22.87354,12,22.87964z M19.50293,7.05475c-0.66852-1.01306-1.53552-1.88-2.54858-2.54852h-0.82159 v4.10785H7.89209V4.50623H7.04565c-4.13873,2.73114-5.27972,8.30029-2.54858,12.43896 c0.66852,1.01306,1.53552,1.88007,2.54858,2.54858h0.84644v-4.10791h8.24066v4.10791h0.82159 C21.09308,16.76257,22.23407,11.19348,19.50293,7.05475z M6.74689,17.87549c-3.24493-2.88354-3.5379-7.85168-0.65436-11.09668 c0.20508-0.23077,0.42358-0.44928,0.65436-0.65436V17.87549z M16.13275,14.24066H7.89209V9.73444h8.24066V14.24066z  M17.84827,17.25549c-0.18768,0.2088-0.38629,0.40747-0.59515,0.59509v-2.48962V8.61407V6.12445 C20.49121,9.03387,20.75763,14.0174,17.84827,17.25549z" />
                        </svg>
                    </a>
                    <div class="o-minimal-header__falafel">
                        <nav class="o-context-menu" aria-label="Context Menu Navigation undefined" aria-hidden="false">
                            <button type="button"
                                class="a-button a-button--integrated -without-label o-context-menu__trigger"
                                data-frok-action="open" aria-haspopup="true" aria-label="Open Context Menu">
                                <i class="a-icon a-button__icon boschicon-bosch-ic-options"></i>
                            </button>
                            <button type="button"
                                class="a-button a-button--integrated -without-label o-context-menu__trigger"
                                data-frok-action="close" aria-haspopup="false" aria-label="Close Context Menu">
                                <i class="a-icon a-button__icon boschicon-bosch-ic-close"></i>
                            </button>
                            <div class="m-popover">
                                <div class="a-box -floating">
                                    <div class="m-popover__content">
                                        <ul class="m-menu-group" role="menubar" aria-orientation="vertical">
                                            <li class="a-menu-item" role="none">
                                                <div class="a-menu-item__wrapper">
                                                    <button href="#" role="menuitem" class="a-menu-item__link"
                                                        id="smallLogoutButton">
                                                        <i class="a-icon boschicon-bosch-ic-my-brand-frame"></i>
                                                        <span class="a-menu-item__label">Log out</span>
                                                    </button>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                </div>
            </header>
            <nav class="m-side-navigation -contrast" aria-label="Side Navigation" aria-hidden="false">
                <div class="m-side-navigation__header">
                    <div class="m-side-navigation__header__label -size-l highlight">
                        Training Planner V1.00
                    </div>
                    <button type="button"
                        class="a-button a-button--integrated -without-label m-side-navigation__header__trigger -open"
                        aria-haspopup="false" aria-label="Open Side Navigation" tabindex="0">
                        <i class="a-icon a-button__icon boschicon-bosch-ic-list-view-mobile"></i>
                    </button>
                    <button type="button"
                        class="a-button a-button--integrated -without-label m-side-navigation__header__trigger -close"
                        aria-haspopup="false" aria-label="Close Side Navigation" tabindex="-1">
                        <i class="a-icon a-button__icon boschicon-bosch-ic-close"></i>
                    </button>
                </div>
                <ul class="m-menu-group" role="menubar" aria-orientation="vertical">
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                data-target="index.html"">
                <i class=" a-icon boschicon-bosch-ic-desktop-application-3d"></i>
                                <span class="a-menu-item__label">Home</span>
                            </a>
                        </div>
                    </li>
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="false"
                                aria-controls="group-id-1" aria-label="open group">
                                <i class="a-icon boschicon-bosch-ic-calendar-date-single"></i>
                                <span class="a-menu-item__label" data-i18n="event-menu"></span>
                                <i class="a-icon ui-ic-down-small"></i>
                            </button>
                        </div>
                        <ul id="group-id-1" class="m-menu-group__group" role="menu">
                            <li class="a-menu-item -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="view_event.html">
                                        <span class="a-menu-item__label" data-i18n="event-menu-1"></span>
                                    </a>
                                </div>
                            </li>
                            <li class="a-menu-item -disabled -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="true"
                                        tabindex="-1" data-target="new_event.html">
                                        <span class="a-menu-item__label" data-i18n="event-menu-2"></span>
                                    </a>
                                </div>
                            </li>
                            <li class="a-menu-item -disabled -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="update_event.html">
                                        <span class="a-menu-item__label" data-i18n="event-menu-3"></span>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="true"
                                tabindex="-1" aria-controls="group-id-2" aria-label="open group">
                                <i class="a-icon boschicon-bosch-ic-material-list"></i>
                                <span class="a-menu-item__label" data-i18n="resources-menu"></span>
                                <i class="a-icon ui-ic-down-small"></i>
                            </button>
                        </div>
                        <ul id="group-id-2" class="m-menu-group__group" role="menu">
                            <li class="a-menu-item -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="view_resources.html">
                                        <span class="a-menu-item__label" data-i18n="resources-menu-1"></span>
                                    </a>
                                </div>
                            </li>
                            <li class="a-menu-item -disabled -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="new_resources.html">
                                        <span class="a-menu-item__label" data-i18n="resources-menu-2"></span>
                                    </a>
                                </div>
                            </li>
                            <li class="a-menu-item -disabled -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="update_resources.html">
                                        <span class="a-menu-item__label" data-i18n="resources-menu-3"></span>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="false"
                                aria-controls="group-id-3" aria-label="open group">
                                <i class="a-icon boschicon-bosch-ic-message"></i>
                                <span class="a-menu-item__label" data-i18n="message-menu"></span>
                                <i class="a-icon ui-ic-down-small"></i>
                            </button>
                        </div>
                        <ul id="group-id-3" class="m-menu-group__group" role="menu">
                            <li class="a-menu-item -disabled -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="view_messages.html">
                                        <span class="a-menu-item__label" data-i18n="message-menu-1"></span>
                                    </a>
                                </div>
                            </li>
                            <li class="a-menu-item -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="reminders.html">
                                        <span class="a-menu-item__label" data-i18n="message-menu-2"></span>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                data-target="settings.html">
                                <i class="a-icon boschicon-bosch-ic-settings"></i>
                                <span class="a-menu-item__label" data-i18n="settings-link"></span>
                            </a>
                        </div>
                    </li>
                    <li class="a-menu-item -disabled" role="none">
                        <div class="a-menu-item__wrapper">
                            <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="true" tabindex="-1"
                                data-target="statistic.html">
                                <i class="a-icon boschicon-bosch-ic-chart-line"></i>
                                <span class="a-menu-item__label" data-i18n="statistics-link"></span>
                            </a>
                        </div>
                    </li>
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                data-target="version.html"">
                <i class=" a-icon boschicon-bosch-ic-alert-info"></i>
                                <span class="a-menu-item__label" data-i18n="version-link"></span>
                            </a>
                        </div>
                    </li>
                </ul>
            </nav>
            <div class="e-container">
                <main class="main" style="padding-top: 6rem">
                    <div class="preview-single">
                        <div class="date_container">
                            <div class="a-notification -neutral notification-button" id="dateStatusButton" tabindex="0"
                                aria-pressed="false" role="button">
                                <i class="a-icon boschicon-bosch-ic-calendar-clock"></i>
                                <div id="notification-label-id-bar-with-icon-neutral" class="a-notification__content">
                                    <!-- Content to be dynamically updated -->
                                </div>
                            </div>
                        </div>
                        <div class="view_container">
                            <div class="left-container">
                                <div class="activity-summary-container">
                                    <h3></h3>
                                    <ul class="activity-summary">
                                        <details class="a-details">
                                            <p>
                                            </p>
                                        </details><!-- Bullet points will be added here dynamically -->
                                    </ul>
                                </div>
                            </div>
                            <div class="right-container">
                                <div class="right-content">
                                    <div class="upper-row">
                                        <div class="grid-container">
                                            <button class="grid-item" id="SC">
                                                <span class="grid-item-title">SC</span>
                                            </button>
                                            <button class="grid-item" id="SALA 4">
                                                <span class="grid-item-title">SALA 4</span>
                                            </button>
                                            <button class="grid-item" id="SALA 3">
                                                <span class="grid-item-title">SALA 3</span>
                                            </button>
                                            <button class="grid-item" id="SALA 2">
                                                <span class="grid-item-title">SALA 2</span>
                                            </button>
                                            <button class="grid-item" id="MEC PRO">
                                                <span class="grid-item-title">MEC PRO</span>
                                            </button>
                                            <button class="grid-item" id="EXT">
                                                <span class="grid-item-title">EXT</span>
                                            </button>
                                            <button class="grid-item" id="BOX 4">
                                                <span class="grid-item-title">BOX 4</span>
                                            </button>
                                            <button class="grid-item" id="BOX 3">
                                                <span class="grid-item-title">BOX 3</span>
                                            </button>
                                            <button class="grid-item" id="BOX 2">
                                                <span class="grid-item-title">BOX 2</span>
                                            </button>
                                            <button class="grid-item" id="BOX 1">
                                                <span class="grid-item-title">BOX 1</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="lower-row">
                                        <div class="a-tile">
                                            <div class="a-text" style="padding: 0.5rem;">
                                                <span class="-size-s" style="display:block;margin-bottom:0.5rem;"
                                                    data-i18n="sum-subtitle">
                                                </span>
                                                <h3 id="event-title" class="-size-xl"
                                                    style="margin-bottom:0.5rem;margin-top:0" data-i18n="sum-title"><i
                                                        class="a-icon ui-ic-inline-right-bold"
                                                        style="margin-left:0.5rem;font-size:24px;vertical-align:baseline"></i>
                                                </h3>
                                            </div>
                                        </div>
                                        <div id="lower-row-events-container"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
                <!-- date dialog-->
                <dialog class="m-dialog -floating-shadow-s -floating" id="date-dialog-info"
                    aria-labelledby="dialog-default-dialog-without-header-title" style="margin: auto; width: 400px;">
                    <div class="m-dialog__content">
                        <div class="m-dialog__headline" data-i18n="ve-dia-date"></div>
                        <div class="m-dialog__body">
                            <div class="m-form-field -quarter">
                                <div class="a-week-input">
                                    <label for="weekPicker" data-i18n="ve-dia-data-week"></label>
                                    <input type="week" id="weekPicker" name="weekPicker" />
                                    <button type="button" class="a-week-input__button" aria-label="open dialog">
                                        <i class="a-icon boschicon-bosch-ic-calendar-clock"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="m-dialog__actions">
                            <button type="button" class="a-button a-button--primary -without-icon" id="dateConfirm">
                                <span class="a-button__label" style="padding-right: 0.75rem;"
                                    data-i18n="ve-dia-conf-btn"></span>
                            </button>
                            <button type="button" class="a-button a-button--secondary -without-icon" id="dateCancel">
                                <span class="a-button__label" data-i18n="ve-dia-cancel-btn"></span>
                            </button>
                        </div>
                    </div>
                </dialog>
                <!-- End of date dialog-->
            </div>
        </div>
    </div>
    <script src="../js/script.js"></script>
    <script type="module">
        import { setLanguage, updateLanguage, setTheme, updateUsernameDisplay, logOut, updateNavMenu, navigationMenu, debounce, getNotificationContainer, showPersistentNotification, hidePersistentNotification, showNotification } from '../js/common.js';
        setLanguage();
        setTheme();
        updateUsernameDisplay();
        updateUsernameDisplay();
        updateNavMenu();
        navigationMenu();

        document.getElementById('logoutButton').addEventListener('click', logOut);
        document.getElementById('smallLogoutButton').addEventListener('click', logOut);
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initializeDialogs();
            updateDateToToday();
            updateSchedule();
        });


        /**
       * Prepare dialog for display on call
       * 1. Enable date selection dialog
       * 2. convert week on selected start_date and end_date
       * @param input {none}
       * @param output {start_date, end_date}
       */
        function initializeDialogs() {

            const dateStatusButton = document.getElementById('dateStatusButton');
            const dateDialog = document.getElementById('date-dialog-info');
            const confirmDate = document.getElementById('dateConfirm');
            const cancelDate = document.getElementById('dateCancel');
            const dateInput = document.getElementById('weekPicker');//('status-date-input');
            const dateElement = document.getElementById('notification-label-id-bar-with-icon-neutral');

            // Date Selection Dialog
            dateStatusButton?.addEventListener("click", () => dateDialog.showModal());

            cancelDate?.addEventListener("click", () => dateDialog.close());

            confirmDate?.addEventListener("click", function () {
                const selectedWeek = dateInput.value; // Format: "2024-W47"

                if (selectedWeek) {
                    // Split the date and create it using local components
                    const { startDate, endDate } = getStartAndEndDateOfISOWeek(selectedWeek);
                    if (startDate && endDate) {
                        dateElement.textContent = `${startDate} - ${endDate}`;
                        // Optionally, store these values globally or pass them to your update function
                        updateSchedule(); // This will query your backend using the updated week range
                        dateDialog.close();
                    } else {
                        alert("Invalid week selected.");
                    }
                } else {
                    alert("Please select a week.");
                }

            });
        }

        /**
       * Prepare date for display on event summary
       * 1. Change date format to string
       * 2. Remove time
       * 3. Return in a readable format dd-mm-yyyy 
       * @param input {none}
       * @param output {start_date, end_date}
       */
        // Utility function to format dates
        function formatDate(date) {
            const e = date.split("T")[0];
            return e.includes('-') ? e.split('-').reverse().join('/') : e;
        }

        /**
       * Define actual date (week)
       * 1. Display actual week on week-picker
       * 2. pass week to function to get week start_date and end_date
       * @param input {none}
       * @param output {start_date, end_date}
       */
        function updateDateToToday() {
            const today = new Date();
            const year = today.getFullYear();
            const weekNumber = getISOWeek(today);
            const weekPicker = document.getElementById("weekPicker");
            const dateElement = document.getElementById('notification-label-id-bar-with-icon-neutral');

            if (weekPicker) {
                const weekNumberPadded = weekNumber < 10 ? '0' + weekNumber : weekNumber;
                weekPicker.value = `${year}-W${weekNumberPadded}`;
                dateElement.textContent = weekPicker.value;
                updateSchedule(); // Run after setting the value
            } else {
                showNotification("weekPicker element not found!", 'error');
            }
        }

        /**
       * Define days of week
       * 1. Retrieves the start (Monday) and end (Sunday) dates of a selected week
       * 2. 
       * @param input {date}
       * @param output {weekÂ´s monday / sunday}
       */
        function getISOWeek(date) {
            let tempDate = new Date(date);
            tempDate.setHours(0, 0, 0, 0);
            tempDate.setDate(tempDate.getDate() + 3 - (tempDate.getDay() + 6) % 7);
            let week1 = new Date(tempDate.getFullYear(), 0, 4);
            return Math.round(((tempDate.getTime() - week1.getTime()) / 86400000 - 3 + (week1.getDay() + 6) % 7) / 7) + 1;
        }

        /**
       * Define weeks monday and friday datek
       * 1. Returns the Monday and Friday dates of a selected week
       * 2. 
       * @param input {week #}
       * @param output {weekÂ´s monday & friday date}
       */
        function getStartAndEndDateOfISOWeek(weekStr) {
            if (!weekStr || !weekStr.includes("-W")) {
                console.error("Invalid week format:", weekStr);
                return { startDate: null, endDate: null };
            }

            let [year, week] = weekStr.split("-W").map(Number);

            if (isNaN(year) || isNaN(week)) {
                console.error("Invalid year or week number:", year, week);
                return { startDate: null, endDate: null };
            }

            let firstDayOfYear = new Date(year, 0, 1);
            let daysOffset = ((week - 1) * 7) - firstDayOfYear.getDay() + 1;
            let startDate = new Date(year, 0, daysOffset + 1);

            if (isNaN(startDate.getTime())) {
                console.error("Invalid calculated startDate:", startDate);
                return { startDate: null, endDate: null };
            }

            let endDate = new Date(startDate);
            endDate.setDate(startDate.getDate() + 6);

            return {
                startDate: startDate.toISOString().split("T")[0],
                endDate: endDate.toISOString().split("T")[0]
            };
        }

        /**
      * Fetches events from the backend for the selected week
      * 1. Retrieves the start (Monday) and end (Sunday) dates of a selected week
      * 2. 
      * @param input {date}
      * @param output {weekÂ´s monday / sunday}
      */
        async function updateSchedule() {
            let selectedWeek = document.getElementById("weekPicker").value;
            let weekDates = getStartAndEndDateOfISOWeek(selectedWeek);

            resetView();

            showPersistentNotification('Loading events...', 'loading');
            try {
                // Fetch events data from the API
                const events = await window.api.getEventsData(weekDates.startDate, weekDates.endDate);

                // Check if events is an array and has data
                if (Array.isArray(events) && events.length > 0) {
                    hidePersistentNotification();
                    showNotification('Events loaded.', 'success');
                    updateGrid(events);
                } else {
                    hidePersistentNotification();
                    showNotification('No events found for the selected week.', 'info');
                }
            } catch (error) {
                console.error('Error loading events:', error);
                hidePersistentNotification();
                showNotification('Error loading events. Please try again.', 'error');
            }
        }

        // ===== VIEW_EVENT.HTML: FUNCTIONS TO LOAD TRAINING DATA =====

        /**
         * Update grid with training information and style based on status:
         * 1. Set color andtext on grid.
         * 2. Pass information to grid buttons for status display.
         * 3. 
         *
         * @param {events}
         */
        // Update grid with retrieved information
        function updateGrid(events) {

            if (events.length > 0) {
                events.forEach(event => {
                    event.resources.forEach(resource => {
                        // Check if the resource category ID is 6
                        if (resource.resource_category_id === 6) {
                            let areaElement = document.getElementById(resource.resource_name.toUpperCase());
                            if (areaElement) {
                                // Apply background color based on event status
                                if (event.event_status === "Executed") {
                                    areaElement.style.backgroundColor = 'green';
                                } else if (event.event_status === "Reserved") {
                                    areaElement.style.backgroundColor = 'yellow';
                                } else if (event.event_status === "confirmed") {
                                    areaElement.style.backgroundColor = 'red';
                                }
                                // Check if the event ID span already exists
                                const existingSpans = areaElement.querySelectorAll('.event-id');
                                const eventIds = Array.from(existingSpans).map(span => span.textContent);

                                // Only add the event ID span if it doesn't already exist
                                if (!eventIds.includes(`Event ID: ${event.event_id}`)) {
                                    let eventIdSpan = document.createElement('span');
                                    eventIdSpan.textContent = `Event ID: ${event.event_id}`;
                                    eventIdSpan.className = 'event-id'; // Optional: add a class for styling
                                    if (event.event_status === "Executed") {
                                        eventIdSpan.style.color = 'white';
                                    } else if (event.event_status === "Reserved") {
                                        eventIdSpan.style.color = 'black';
                                    } else if (event.event_status === "confirmed") {
                                        eventIdSpan.style.color = 'white';
                                    }
                                    areaElement.appendChild(eventIdSpan);
                                }

                                // Add click event listener to the grid item
                                areaElement.addEventListener("click", () => updateEventDetails(event, resource.resource_name, events));
                            }
                        }
                    });
                });
            } else {
                showNotification('No events found for the selected week.', 'info');
            }
        }

        /** Updates event details when a training area is clicked */
        function updateEventDetails(selectedEvent, resourceName, events) {
            // Set the area title (e.g., "Training Area: Gym")
            const titleElement = document.getElementById("event-title");
            titleElement.textContent = `Training Area: ${resourceName}`;

            // Filter events for the selected area based on the resource name.
            const areaEvents = events.filter(event =>
                event.resources.some(resource => resource.resource_name === resourceName)
            );

            // Update the lower row to display a summary block for each event.
            // Create or reuse a container inside the lower row.
            let lowerRowEventsContainer = document.getElementById('lower-row-events-container');
            if (!lowerRowEventsContainer) {
                lowerRowEventsContainer = document.createElement('div');
                lowerRowEventsContainer.id = 'lower-row-events-container';
                // Insert the container below the current summary tile.
                document.querySelector('.lower-row').appendChild(lowerRowEventsContainer);
            }
            // Clear previous event summaries.
            lowerRowEventsContainer.innerHTML = '';

            // For each event in the filtered area events, create a summary block.
            areaEvents.forEach(event => {
                const eventBlock = document.createElement('div');
                eventBlock.classList.add('event-summary-block');

                const eventTitle = document.createElement('p');
                eventTitle.textContent = `Event: ${event.event_name}`;
                eventBlock.appendChild(eventTitle);

                const statusContainer = document.createElement('div');
                statusContainer.classList.add('event-status-container');

                const statusChip = document.createElement('div');
                statusChip.classList.add('a-chip', 'event-status');
                // Set background color based on event status.
                if (event.event_status === "Reserved") {
                    statusChip.style.backgroundColor = "yellow";
                    statusChip.style.color = "black";
                } else if (event.event_status === "Confirmed") {
                    statusChip.style.backgroundColor = "red";
                    statusChip.style.color = "white";
                } else if (event.event_status === "Executed") {
                    statusChip.style.backgroundColor = "green";
                    statusChip.style.color = "white";
                }
                statusChip.textContent = event.event_status;
                eventBlock.appendChild(statusContainer);
                statusContainer.appendChild(statusChip);

                lowerRowEventsContainer.appendChild(eventBlock);
            });

            // Update the left container with a detailed summary.
            updateActivitySummary(areaEvents);
        }

        /** Updates the activity summary (left container) with details for each event */
        function updateActivitySummary(areaEvents) {

            const activitySummaryContainer = document.querySelector('.activity-summary-container');
            activitySummaryContainer.innerHTML = ''; // Clear previous content

            areaEvents.forEach(event => {
                // Create a header for the event.
                const title = document.createElement('h3');
                title.textContent = `Event: ${event.event_name}`;
                activitySummaryContainer.appendChild(title);
                // Create a details block for the event.
                const details = document.createElement('p');
                const resourceList = document.createElement('ul');

                event.resources.forEach(resource => {
                    const listItem = document.createElement('li'); // Create a list item
                    listItem.textContent = `${resource.resource_name} (Status: ${resource.assign_status})`; // Set the text for the list item
                    resourceList.appendChild(listItem); // Append the list item to the unordered list
                });

                const start_date = formatDate(event.event_start_date);
                const end_date = formatDate(event.event_end_date);
                const requiredParticipant = event.event_req_part == null || event.event_req_part == '' ? 'Not required' : event.event_req_part;
                const actualParticipant = event.event_insc_part == null || event.event_insc_part == '' ? 'Not required' : event.event_insc_part;
                details.innerHTML = `
                         <strong>Information:</strong> ${event.event_name_other}<br>
                         <strong>Event type:</strong> ${event.event_type}<br>
                         <strong>Status:</strong> ${event.event_status}<br>
                         <strong>Start Date:</strong> ${start_date}<br>
                         <strong>End Date:</strong> ${end_date}<br>
                         <strong>Required participants:</strong> ${requiredParticipant}<br>
                         <strong>Inscribed participants:</strong> ${actualParticipant}<br>
                         <strong>Resources:</strong><br>
                        
                         `;
                details.appendChild(resourceList);
                activitySummaryContainer.appendChild(details);
            });
        };


        /** Reset of the grid for every date query */
        function resetView() {
            // Reset grid items (assuming grid items have class 'grid-item')
            const areaElements = document.querySelectorAll('.grid-item');
            areaElements.forEach(areaElement => {
                areaElement.style.backgroundColor = '';
                const eventIdSpans = areaElement.querySelectorAll('.event-id');
                eventIdSpans.forEach(span => span.remove());
                // Optionally, remove event listeners by replacing with a clone:
                // let newElement = areaElement.cloneNode(true);
                // areaElement.parentNode.replaceChild(newElement, areaElement);
            });

            // Clear the activity summary container
            const activitySummaryContainer = document.querySelector('.activity-summary-container');
            if (activitySummaryContainer) {
                activitySummaryContainer.innerHTML = '';
            }

            // Clear the lower row events container, if it exists
            const lowerTitle = document.getElementById('event-title');
            const lowerRowEventsContainer = document.getElementById('lower-row-events-container');
            if (lowerRowEventsContainer && lowerTitle) {
                lowerRowEventsContainer.innerHTML = '';
                const title = document.createElement('h3');
                const lang = localStorage.getItem('language');
                let mes1;
                let mes2;
                switch (lang) {
                    case 'en':
                        mes1 = `Event information`;
                        mes2 = 'Select an area (event details)';
                        break;
                    case 'es':
                        mes1 = 'InformaciÃ³n del evento';
                        mes2 = 'Seleccione area (detalles del evento)';
                        break;
                    case 'pt':
                        mes1 = 'InformaÃ§Ã£o do evento';
                        mes2 = 'Seleccione area (detalhes do evento)';
                        break;
                    default:
                        mes1 = `Event information`;
                        mes2 = 'Select an area (event details)';
                }
                title.textContent = mes1;
                activitySummaryContainer.appendChild(title);
                lowerTitle.innerText = mes2;
            }
        }

    </script>
</body>

</html>