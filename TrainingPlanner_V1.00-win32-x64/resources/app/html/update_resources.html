<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="description"
    content="Author: Joel Lustgarten, Organization: Technical training center, Area: MA-AA/TSS2-LA, Company: Robert Bosch Ltda., Country: Brazil, Content: Technical training material" />
  <meta name="google-site-verification" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="all" />
  <meta name="googlebot" content="noarchive" />
  <meta name="googlebot" content="notranslate" />
  <meta name="google" content="nopagereadaloud" />
  <meta http-equiv="imagetoolbar" content="no" />
  <meta name="rating" content="general" />
  <meta http-equiv="pragma" content="no-cache" />
  <meta name="copyright" content="Â© Robert Bosch Ltda." />
  <meta name="keywords" content="Bosch, Technical training, Techical training center, Mechanics" />
  <link rel="icon" type="image/x-icon" href="../assets/icons/favicon.ico" />
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <title>CTA | Training Planner</title>
</head>
<style>
  .background-wrapper {
    position: relative;
    height: auto;
    min-height: 100vh;
  }

  .preview-single {
    align-items: center;
    box-sizing: border-box;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
  }

  .component-preview__details {
    display: block;
    width: 100%;
    overflow-y: auto;
    padding: 2rem;
  }

  /* Styling for notifications */
  #notification-container {
    position: fixed;
    top: 10px;
    right: 10px;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    z-index: 1000;
    /* By default hidden */
    display: none;
  }

  #notification-container.info {
    background-color: #2196F3;
    color: #fff;
  }

  #notification-container.success {
    background-color: #4CAF50;
    color: #fff;
  }

  #notification-container.error {
    background-color: #F44336;
    color: #fff;
  }

  #notification-container.loading {
    background-color: #555;
    color: #fff;
  }
</style>

<body>
  <div class="wrapper -light-mode" style="width: 100vw; height: 100vh">
    <div class="background-wrapper -primary">
      <header class="o-minimal-header -primary">
        <div class="o-minimal-header__supergraphic"></div>
        <div class="o-minimal-header__top">
          <div class="o-minimal-header__burger">
            <button type="button" class="a-button a-button--integrated -without-label" aria-label="Side Navigation">
              <i class="a-icon a-button__icon ui-ic-menu"></i>
            </button>
          </div>
          <div class="o-minimal-header__title" data-i18n="update-resource-title"></div>
          <ul class="o-minimal-header__actions">
            <li>
              <button type="button" class="a-button a-button--integrated -without-label" style="
                    align-items: center;
                    text-align: center;
                    margin-right: 30px;
                  " id="userButton">
                <i class="a-icon a-button__icon boschicon-bosch-ic-my-brand-frame"></i>
                <span style="white-space: nowrap">User:
                  <span style="white-space: nowrap" id="username_display">Not
                    logged in</span></span>
              </button>
            </li>
            <li>
              <button type="button" class="a-button a-button--integrated -without-label" id="logoutButton" style="
                    align-items: center;
                    text-align: center;
                    margin-right: 30px;
                  ">
                <i class="a-icon a-button__icon boschicon-bosch-ic-logout"></i>
                <span style="white-space: nowrap">Log out</span>
              </button>
            </li>
          </ul>
          <a href="/" class="o-minimal-header__logo" aria-label="Bosch Logo">
            <svg width="108px" height="24px" viewBox="0 0 108 24" xmlns="http://www.w3.org/2000/svg">
              <path id="bosch-logo-text"
                d="M78.19916,15.03735c0,3.46057-3.1618,5.1535-6.12445,5.1535c-3.41083,0-5.17847-1.29462-6.57263-2.96265 l2.51453-2.48962c1.07056,1.36926,2.46472,2.0415,4.0083,2.0415c1.29462,0,2.14105-0.62244,2.14105-1.56848 c0-0.99585-0.77179-1.31952-2.83813-1.74274l-0.54773-0.12451c-2.48962-0.52283-4.53113-1.91699-4.53113-4.75519 c0-3.112,2.53943-4.97925,5.87549-4.97925c2.8382,0,4.65564,1.21991,5.77594,2.48962l-2.46472,2.43988 c-0.82831-0.91748-2.00061-1.44946-3.23651-1.46893c-0.89624,0-1.91699,0.42328-1.91699,1.46893 c0,0.97095,1.07056,1.31946,2.41492,1.59332l0.54773,0.12451C75.51038,10.73029,78.24896,11.42737,78.19916,15.03735z  M64.80499,11.92529c0,4.65558-2.66394,8.29047-7.26971,8.29047c-4.58093,0-7.26971-3.63489-7.26971-8.29047 c0-4.63068,2.68878-8.29047,7.26971-8.29047C62.14105,3.63483,64.80499,7.29462,64.80499,11.92529z M60.92114,11.92529 c0-2.46472-1.1452-4.48132-3.38586-4.48132s-3.36102,1.9917-3.36102,4.48132s1.12036,4.50623,3.36102,4.50623 S60.92114,14.43982,60.92114,11.92529z M87.06226,16.43152c-1.74274,0-3.56018-1.44397-3.56018-4.60583 c0-2.81323,1.69293-4.38171,3.46057-4.38171c1.39423,0,2.21576,0.64728,2.8631,1.76764l3.18671-2.11621 c-1.59338-2.41492-3.48547-3.43567-6.09961-3.43567c-4.78009,0-7.36926,3.70953-7.36926,8.19086 c0,4.70544,2.86304,8.39008,7.31946,8.39008c3.13696,0,4.63074-1.09546,6.24902-3.43567l-3.21167-2.16602 C89.25311,15.68463,88.55603,16.43152,87.06226,16.43152z M48.97095,15.46057c0,2.66388-2.43982,4.40662-4.92944,4.40662H35.9502 V4.0332h7.44397c2.8382,0,4.9046,1.44397,4.9046,4.35681c0.01666,1.43036-0.85675,2.72058-2.19086,3.23651 C46.10791,11.65143,48.97095,12.29877,48.97095,15.46057z M39.80914,10.25726h2.83813 c0.02155,0.00134,0.04309,0.00226,0.06464,0.00269c0.81476,0.01575,1.48804-0.6319,1.50385-1.44666 c0.00342-0.0567,0.00342-0.11353,0-0.17017c-0.047-0.77802-0.71576-1.37061-1.49377-1.32361h-2.88794L39.80914,10.25726z  M44.76349,14.98755c0-0.92114-0.67218-1.54358-2.09131-1.54358h-2.81323v3.11206h2.88794 C43.91699,16.55603,44.76349,16.13275,44.76349,14.98755z M103.64313,4.03326v5.82568H98.8382V4.03326h-4.15771v15.83398h4.15771 v-6.24896h4.80493v6.24896h4.15771V4.03326H103.64313z" />
              <path id="bosch-logo-anker"
                d="M12,0C5.37256,0,0,5.37256,0,12c0,6.62738,5.37256,12,12,12s12-5.37262,12-12C23.99646,5.37402,18.62598,0.00354,12,0z  M12,22.87964C5.99133,22.87964,1.12036,18.00867,1.12036,12S5.99133,1.1203,12,1.1203S22.87964,5.99133,22.87964,12 C22.87354,18.0061,18.0061,22.87354,12,22.87964z M19.50293,7.05475c-0.66852-1.01306-1.53552-1.88-2.54858-2.54852h-0.82159 v4.10785H7.89209V4.50623H7.04565c-4.13873,2.73114-5.27972,8.30029-2.54858,12.43896 c0.66852,1.01306,1.53552,1.88007,2.54858,2.54858h0.84644v-4.10791h8.24066v4.10791h0.82159 C21.09308,16.76257,22.23407,11.19348,19.50293,7.05475z M6.74689,17.87549c-3.24493-2.88354-3.5379-7.85168-0.65436-11.09668 c0.20508-0.23077,0.42358-0.44928,0.65436-0.65436V17.87549z M16.13275,14.24066H7.89209V9.73444h8.24066V14.24066z  M17.84827,17.25549c-0.18768,0.2088-0.38629,0.40747-0.59515,0.59509v-2.48962V8.61407V6.12445 C20.49121,9.03387,20.75763,14.0174,17.84827,17.25549z" />
            </svg>
          </a>
          <div class="o-minimal-header__falafel">
            <nav class="o-context-menu" aria-label="Context Menu Navigation undefined" aria-hidden="false">
              <button type="button" class="a-button a-button--integrated -without-label o-context-menu__trigger"
                data-frok-action="open" aria-haspopup="true" aria-label="Open Context Menu">
                <i class="a-icon a-button__icon boschicon-bosch-ic-options"></i>
              </button>
              <button type="button" class="a-button a-button--integrated -without-label o-context-menu__trigger"
                data-frok-action="close" aria-haspopup="false" aria-label="Close Context Menu">
                <i class="a-icon a-button__icon boschicon-bosch-ic-close"></i>
              </button>
              <div class="m-popover">
                <div class="a-box -floating">
                  <div class="m-popover__content">
                    <ul class="m-menu-group" role="menubar" aria-orientation="vertical">
                      <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                          <button href="#" role="menuitem" class="a-menu-item__link" id="smallLogoutButton">
                            <i class="a-icon boschicon-bosch-ic-my-brand-frame"></i>
                            <span class="a-menu-item__label">Log out</span>
                          </button>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </nav>
          </div>
        </div>
      </header>
      <nav class="m-side-navigation -contrast" aria-label="Side Navigation" aria-hidden="false">
        <div class="m-side-navigation__header">
          <div class="m-side-navigation__header__label -size-l highlight">
            Training Planner V1.00
          </div>
          <button type="button"
            class="a-button a-button--integrated -without-label m-side-navigation__header__trigger -open"
            aria-haspopup="false" aria-label="Open Side Navigation" tabindex="0">
            <i class="a-icon a-button__icon boschicon-bosch-ic-list-view-mobile"></i>
          </button>
          <button type="button"
            class="a-button a-button--integrated -without-label m-side-navigation__header__trigger -close"
            aria-haspopup="false" aria-label="Close Side Navigation" tabindex="-1">
            <i class="a-icon a-button__icon boschicon-bosch-ic-close"></i>
          </button>
        </div>
        <ul class="m-menu-group" role="menubar" aria-orientation="vertical">
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false" data-target="index.html"">
                      <i class=" a-icon boschicon-bosch-ic-desktop-application-3d"></i>
                <span class="a-menu-item__label">Home</span>
              </a>
            </div>
          </li>
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="false"
                aria-controls="group-id-1" aria-label="open group">
                <i class="a-icon boschicon-bosch-ic-calendar-date-single"></i>
                <span class="a-menu-item__label" data-i18n="event-menu"></span>
                <i class="a-icon ui-ic-down-small"></i>
              </button>
            </div>
            <ul id="group-id-1" class="m-menu-group__group" role="menu">
              <li class="a-menu-item -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="view_event.html">
                    <span class="a-menu-item__label" data-i18n="event-menu-1"></span>
                  </a>
                </div>
              </li>
              <li class="a-menu-item -disabled -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="true" tabindex="-1"
                    data-target="new_event.html">
                    <span class="a-menu-item__label" data-i18n="event-menu-2"></span>
                  </a>
                </div>
              </li>
              <li class="a-menu-item -disabled -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="update_event.html">
                    <span class="a-menu-item__label" data-i18n="event-menu-3"></span>
                  </a>
                </div>
              </li>
            </ul>
          </li>
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="true" tabindex="-1"
                aria-controls="group-id-2" aria-label="open group">
                <i class="a-icon boschicon-bosch-ic-material-list"></i>
                <span class="a-menu-item__label" data-i18n="resources-menu"></span>
                <i class="a-icon ui-ic-down-small"></i>
              </button>
            </div>
            <ul id="group-id-2" class="m-menu-group__group" role="menu">
              <li class="a-menu-item -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="view_resources.html">
                    <span class="a-menu-item__label" data-i18n="resources-menu-1"></span>
                  </a>
                </div>
              </li>
              <li class="a-menu-item -disabled -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="new_resources.html">
                    <span class="a-menu-item__label" data-i18n="resources-menu-2"></span>
                  </a>
                </div>
              </li>
              <li class="a-menu-item -disabled -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="update_resources.html">
                    <span class="a-menu-item__label" data-i18n="resources-menu-3"></span>
                  </a>
                </div>
              </li>
            </ul>
          </li>
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="false"
                aria-controls="group-id-3" aria-label="open group">
                <i class="a-icon boschicon-bosch-ic-message"></i>
                <span class="a-menu-item__label" data-i18n="message-menu"></span>
                <i class="a-icon ui-ic-down-small"></i>
              </button>
            </div>
            <ul id="group-id-3" class="m-menu-group__group" role="menu">
              <li class="a-menu-item -disabled -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="view_messages.html">
                    <span class="a-menu-item__label" data-i18n="message-menu-1"></span>
                  </a>
                </div>
              </li>
              <li class="a-menu-item -indent" role="none">
                <div class="a-menu-item__wrapper">
                  <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                    data-target="reminders.html">
                    <span class="a-menu-item__label" data-i18n="message-menu-2"></span>
                  </a>
                </div>
              </li>
            </ul>
          </li>
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false" data-target="settings.html">
                <i class="a-icon boschicon-bosch-ic-settings"></i>
                <span class="a-menu-item__label" data-i18n="settings-link"></span>
              </a>
            </div>
          </li>
          <li class="a-menu-item -disabled" role="none">
            <div class="a-menu-item__wrapper">
              <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="true" tabindex="-1"
                data-target="statistic.html">
                <i class="a-icon boschicon-bosch-ic-chart-line"></i>
                <span class="a-menu-item__label" data-i18n="statistics-link"></span>
              </a>
            </div>
          </li>
          <li class="a-menu-item" role="none">
            <div class="a-menu-item__wrapper">
              <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false" data-target="version.html"">
                      <i class=" a-icon boschicon-bosch-ic-alert-info"></i>
                <span class="a-menu-item__label" data-i18n="version-link"></span>
              </a>
            </div>
          </li>
        </ul>
      </nav>
      <div class="e-container">
        <main style="padding-top: 6rem">
          <div class="preview-single">

            <!-- Uper tab index-->
            <div class="a-tab-navigation__wrapper" style="width: 100%;  margin-left: 2rem;"><button type="button"
                class="a-button a-button--integrated -without-label a-tab-navigation__button-left"
                aria-label="scroll to left"><i class="a-icon a-button__icon ui-ic-left-small"></i></button>
              <ol class="a-tab-navigation" style="justify-content: space-between;" role="tablist">
                <li class="a-tab-navigation__item" role="none"><button type="button"
                    class="a-tab-navigation__tab -selected" data-frok-tab-identifier="2" tabindex="0" role="tab"
                    aria-controls="tab-2" id="tab-1"><span class="a-tab-navigation__tab-content"><span
                        class="a-tab-navigation__label" data-i18n="vr-trainers"></span></span></button></li>
                <li class="a-tab-navigation__item" role="none"><button type="button" class="a-tab-navigation__tab"
                    data-frok-tab-identifier="3" tabindex="0" role="tab" aria-controls="tab-3" id="tab-2"><span
                      class="a-tab-navigation__tab-content"><span
                        class="a-tab-navigation__label" data-i18n="vr-vehicles"></span></span></button></li>
                <li class="a-tab-navigation__item" role="none"><button type="button" class="a-tab-navigation__tab"
                    data-frok-tab-identifier="4" tabindex="0" role="tab" aria-controls="tab-4" id="tab-3"><span
                      class="a-tab-navigation__tab-content"><span class="a-tab-navigation__label" data-i18n="vr-equipment">
                      </span></span></button></li>
                <li class="a-tab-navigation__item" role="none"><button type="button" class="a-tab-navigation__tab"
                    data-frok-tab-identifier="5" tabindex="0" role="tab" aria-controls="tab-5" id="tab-4"><span
                      class="a-tab-navigation__tab-content"><span
                        class="a-tab-navigation__label" data-i18n="vr-multimedia"></span></span></button></li>
                <li class="a-tab-navigation__item" role="none"><button type="button" class="a-tab-navigation__tab"
                    data-frok-tab-identifier="6" tabindex="0" role="tab" aria-controls="tab-6" id="tab-5"
                    aria-pressed="true"><span class="a-tab-navigation__tab-content"><span
                        class="a-tab-navigation__label" data-i18n="vr-workstations"></span></span></button></li>
              </ol><button type="button"
                class="a-button a-button--integrated -without-label a-tab-navigation__button-right"
                aria-label="scroll to right"><i class="a-icon a-button__icon ui-ic-right-small"></i></button>
            </div>
            <!-- End of upper tab index-->

            <!-- Tab containers-->
            <div class="component-preview__details" data-tab-Name="tab-1" tabindex="0">
              <div class="m-details-group" style="margin-left: 2rem;">
                <!-- fill dynamically-->
              </div>
            </div>

            <div class="component-preview__details" data-tab-Name="tab-2" tabindex="1">
              <div class="m-details-group" style="margin-left: 2rem;">
                <!-- fill dynamically-->
              </div>
            </div>

            <div class="component-preview__details" data-tab-Name="tab-3" tabindex="2">
              <div class="m-details-group" style="margin-left: 2rem;">
                <!-- Fill dynamically-->
              </div>
            </div>

            <div class="component-preview__details" data-tab-Name="tab-4" tabindex="3">
              <div class="m-details-group" style="margin-left: 2rem;">
                <!-- Fill dynamically-->
              </div>
            </div>

            <div class="component-preview__details" data-tab-Name="tab-5" tabindex="4">
              <div class="m-details-group" style="margin-left: 2rem;">
                <!-- Fill dynamically-->
              </div>
            </div>
            <!-- End of tab containers-->

          </div>
        </main>
      </div>
    </div>
  </div>
  <script src="../js/script.js"></script>
  <script type="module">
    import { setLanguage, updateLanguage, setTheme, updateUsernameDisplay, logOut, updateNavMenu, navigationMenu, debounce, getNotificationContainer, showPersistentNotification, hidePersistentNotification, showNotification } from '../js/common.js';
    setLanguage();
    setTheme();
    updateUsernameDisplay();
    updateNavMenu();
    navigationMenu();

    document.getElementById('logoutButton').addEventListener('click', logOut);
    document.getElementById('smallLogoutButton').addEventListener('click', logOut);

  </script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      initializeTabs();
      loadAllResourcesUpdate();
      updateActiveTabData()
    });


    const header = ['Name', 'Status', 'Action'];
    const vehHeader = ['License', 'Status', 'Action'];
    const workHeader = ['Name', 'Description', 'Action'];
    const fieldMappings = ['resource_name', 'status'];

    // Global resource cache to store data loaded once.
    let resourceCache = {};

        /**
         *  Load all resources once using Promise.all
         * 1. create an array with selected resources.
         * 2. 
         * 3. 
         *
         * @param {none} input
         * @Param{resource data} Output type:Array
         */
    async function loadAllResourcesUpdate() {
      showPersistentNotification("Loading resources...", "loading");
      try {
        const [trainers, vehicles, equipments, multimedia, workstations] = await Promise.all([
          window.api.getResourceDataByCategory(1), // trainers
          window.api.getResourceDataByCategory(2), // vehicles
          window.api.getResourceDataByCategory(3), // equipment
          window.api.getResourceDataByCategory(4), // multimedia
          window.api.getResourceDataByCategory(5)  // workstations
        ]);
        resourceCache = {
          trainers: trainers,
          vehicles: vehicles,
          equipments: equipments,
          multimedia: multimedia,
          workstations: workstations
        };
        //console.log("Resource Cache:", resourceCache);
        hidePersistentNotification();
        updateActiveTabData();
        showNotification("resources loaded", 'success');
      } catch (error) {
        hidePersistentNotification();
        console.error("Error loading resources:", error);
        showNotification("Error loading resources. Please try again.", "error");
      }
    }

    /**
     * Initialize tabs
     * 1. Get selected tab.
     * 2. Set display of selected container.
     * 3. 
     *
     * @param {none} input
     * @Param{none} Output
     */
    function initializeTabs() {
      const tabButtons = document.querySelectorAll('.a-tab-navigation__item');
      const tabContents = document.querySelectorAll('.component-preview__details');

      function selectTab(event) {
        const liElement = event.currentTarget; // Get the <li> element that was clicked
        const button = liElement.querySelector('button'); // Find the button within the <li>

        if (button) {
          const tabId = button.id; // Get the ID of the parent <li>

          // Update tab contents
          tabContents.forEach(content => {
            content.style.display = content.getAttribute('data-tab-Name') === tabId ? 'block' : 'none';
          });

          updateActiveTabData();

        } else {
          showNotification("Button not found", 'error'); // Log an error if button is not found
        }
      }

      // Add click event listeners to all tab buttons' parent <li>
      tabButtons.forEach(li => li.addEventListener('click', selectTab));

      if (tabButtons.length > 0) {
        tabButtons[0].click();
      }
    }

    /**
     * ILoad cache data on selected tab
     * 1. Get selected tab.
     * 2. load data for selected tab.
     * 3. 
     *
     * @param {none} input
     * @Param{none} Output type:Array
     */
    function updateActiveTabData() {
      const activeTab = document.querySelector('.a-tab-navigation__tab.-selected'); // Adjust the selector as needed
      const tabId = activeTab ? activeTab.id : null;

      if (!tabId) {
        console.warn('No active tab selected.');
        return;
      }

      if (!resourceCache || Object.keys(resourceCache).length === 0) {
        console.warn('Resource cache is empty. Retrying...');
        setTimeout(updateActiveTabData, 100); // Retry after 100ms
        return;
      }

      // Define header arrays and field mappings (assuming every resource row in Resources table has 'resource_name' and 'status')
      const header = ['Name', 'Status', 'Action'];
      const vehHeader = ['License', 'Status', 'Action'];
      const workHeader = ['Name', 'Description', 'Action'];
      // For simplicity, we assume that all resource rows have these common fields.
      const fieldMappings = ['resource_name', 'status'];

      switch (tabId) {
        case 'tab-1': // Trainers
          populateTable(document.querySelector('[data-tab-Name="tab-1"]'), resourceCache.trainers, header, fieldMappings);
          break;
        case 'tab-2': // Vehicles
          populateTable(document.querySelector('[data-tab-Name="tab-2"]'), resourceCache.vehicles, vehHeader, fieldMappings);
          break;
        case 'tab-3': // Equipment
          populateTable(document.querySelector('[data-tab-Name="tab-3"]'), resourceCache.equipments, header, fieldMappings);
          break;
        case 'tab-4': // Multimedia
          populateTable(document.querySelector('[data-tab-Name="tab-4"]'), resourceCache.multimedia, header, fieldMappings);
          break;
        case 'tab-5': // Workstations
          populateTable(document.querySelector('[data-tab-Name="tab-5"]'), resourceCache.workstations, workHeader, fieldMappings);
          break;
        default:
          console.warn('No data loading function defined for tab:', tabId);
      }
    }

    /**
     * Populate tab container
     * 1. Get cache data
     * 2. Populate container.
     * 3. Call for CRUD operation on resources table
     *
     * @param {Container name, data, headers, field map} input
     * @Param{none} Output 
     */
    function populateTable(container, data, headers, fieldMappings) {
      // Select the inner m-details-group container
      const detailsGroup = container.querySelector('.m-details-group');
      // Clear existing content
      detailsGroup.innerHTML = ''; // Clear existing content in the m-details-group
      // Create the table element
      const table = document.createElement('table');
      table.className = 'm-table';
      table.setAttribute('aria-label', 'Data table');
      // Create the table header
      const thead = document.createElement('thead');
      const headerRow = document.createElement('tr');

      headers.forEach(headerText => {
        const th = document.createElement('th');
        th.innerText = headerText;
        headerRow.appendChild(th);
      });
      thead.appendChild(headerRow);
      table.appendChild(thead);
      // Create the table body
      const tbody = document.createElement('tbody');
      data.forEach(item => {
        const row = document.createElement('tr');
        // Dynamically populate row cells based on fieldMappings
        fieldMappings.forEach(field => {
          const td = document.createElement('td');
          td.innerText = item[field] ? item[field] : "";
          row.appendChild(td);
        });

        // Add a customizable action cell
        const actionCell = document.createElement('td');
        actionCell.style.display = 'flex';
        actionCell.style.justifyContent = 'center';
        actionCell.style.alignItems = 'center';

        const deleteButton = document.createElement('button');
        deleteButton.type = 'button';
        deleteButton.className = 'a-button a-button--integrated -without-icon';
        deleteButton.setAttribute('aria-label', 'Delete');
        deleteButton.style.alignItems = 'center';
        deleteButton.innerHTML = `
              <span style="display: flex; gap: 10px; !important">
                Delete
                <i class="a-icon boschicon-bosch-ic-standby"></i>
              </span>
          `;

        if (item.status === 'Inactive') {
          deleteButton.setAttribute('disabled', "");
        } else {
          deleteButton.removeAttribute('disabled');

          // Add an onclick event listener to the delete button
          deleteButton.addEventListener('click', () => {
            // Call your delete function here
            test(item.resource_id); // Assuming data.id is the identifier for the resource
          });
        }

        actionCell.appendChild(deleteButton);
        row.appendChild(actionCell);
        tbody.appendChild(row);
      });


      table.appendChild(tbody);
      detailsGroup.appendChild(table);
    }

    async function test(id) {
      // Show a persistent "loading" notification.
      showPersistentNotification("Disabling resource...", "loading");


      try {
        // Send data to the main process
        const result = await window.api.disableResource(id);
        hidePersistentNotification();
        if (result.success) {
          showNotification(result.message, "success");
          setTimeout(() => {
            window.location.href = 'update_resources.html'; // Redirect to the resources page
          }, 2000);
        } else {
          showNotification("Error: " + result.message, "error");
        }
      } catch (error) {
        hidePersistentNotification();
        showNotification("An error occurred while disabling resource. Please try again.", "error"); 
      }
    }
  </script>
</body>

</html>