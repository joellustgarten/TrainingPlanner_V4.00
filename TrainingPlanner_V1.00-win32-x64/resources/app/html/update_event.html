<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="description"
        content="Author: Joel Lustgarten, Organization: Technical training center, Area: MA-AA/TSS2-LA, Company: Robert Bosch Ltda., Country: Brazil, Content: Technical training material" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="copyright" content="Â© Robert Bosch Ltda." />
    <meta name="keywords" content="Bosch, Technical training, Technical training center, Mechanics" />
    <link rel="icon" type="image/x-icon" href="../assets/favicons/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="../css/main.css" />
    <title>CTA | Training Planner</title>
</head>
<style>
    .background-wrapper {
        position: relative;
        height: auto;
        min-height: 100vh;
    }

    .component-preview__details {
        display: block;
        width: 100%;
        overflow-y: auto;
        padding: 2rem;
    }

    .preview-single {
        align-items: center;
        box-sizing: border-box;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }

    .a-list {
        margin: 0;
        padding: 1rem 0 1rem 1rem;
    }

    .a-search-suggestions {
        display: none;
    }

    .check_box_container {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 30px;
        align-items: start;
    }

    .check_box_container.check_box_vehicles, .check_box_container.check_box_multimedia {
        grid-template-columns: repeat(3, 1fr);
    }

    .check_box_container.check_box_area {
        grid-template-columns: repeat(5, 1fr);
    }

    .check_box_container .a-checkbox {
        display: flex;
        align-items: center;
        white-space: nowrap;
    }

    .check_box_container label {
        margin-left: 8px;
    }

    /* Styling for notifications */
    #notification-container {
        position: fixed;
        top: 10px;
        right: 10px;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        z-index: 1000;
        /* By default hidden */
        display: none;
    }

    #notification-container.info {
        background-color: #2196F3;
        color: #fff;
    }

    #notification-container.success {
        background-color: #4CAF50;
        color: #fff;
    }

    #notification-container.error {
        background-color: #F44336;
        color: #fff;
    }

    #notification-container.loading {
        background-color: #555;
        color: #fff;
    }

    .o-form button[type=submit] {
        margin: 0;
    }
</style>

<body>
    <div class="wrapper -light-mode" style="width: 100vw; height: 100vh">
        <div class="background-wrapper -primary">
            <header class="o-minimal-header -primary">
                <div class="o-minimal-header__supergraphic"></div>
                <div class="o-minimal-header__top">
                    <div class="o-minimal-header__burger">
                        <button type="button" class="a-button a-button--integrated -without-label"
                            aria-label="Side Navigation">
                            <i class="a-icon a-button__icon ui-ic-menu"></i>
                        </button>
                    </div>
                    <div class="o-minimal-header__title" data-i18n="update-event-title"></div>
                    <ul class="o-minimal-header__actions">
                        <li>
                            <button type="button" class="a-button a-button--integrated -without-label" style="
                    align-items: center;
                    text-align: center;
                    margin-right: 30px;
                  " id="userButton">
                                <i class="a-icon a-button__icon boschicon-bosch-ic-my-brand-frame"></i>
                                <span style="white-space: nowrap">User:
                                    <span style="white-space: nowrap" id="username_display"></span></span>
                            </button>
                        </li>
                        <li>
                            <button type="button" class="a-button a-button--integrated -without-label" id="logoutButton"
                                style="
                    align-items: center;
                    text-align: center;
                    margin-right: 30px;
                  ">
                                <i class="a-icon a-button__icon boschicon-bosch-ic-logout"></i>
                                <span style="white-space: nowrap">Log out</span>
                            </button>
                        </li>
                    </ul>
                    <a href="/" class="o-minimal-header__logo" aria-label="Bosch Logo">
                        <svg width="108px" height="24px" viewBox="0 0 108 24" xmlns="http://www.w3.org/2000/svg">
                            <path id="bosch-logo-text"
                                d="M78.19916,15.03735c0,3.46057-3.1618,5.1535-6.12445,5.1535c-3.41083,0-5.17847-1.29462-6.57263-2.96265 l2.51453-2.48962c1.07056,1.36926,2.46472,2.0415,4.0083,2.0415c1.29462,0,2.14105-0.62244,2.14105-1.56848 c0-0.99585-0.77179-1.31952-2.83813-1.74274l-0.54773-0.12451c-2.48962-0.52283-4.53113-1.91699-4.53113-4.75519 c0-3.112,2.53943-4.97925,5.87549-4.97925c2.8382,0,4.65564,1.21991,5.77594,2.48962l-2.46472,2.43988 c-0.82831-0.91748-2.00061-1.44946-3.23651-1.46893c-0.89624,0-1.91699,0.42328-1.91699,1.46893 c0,0.97095,1.07056,1.31946,2.41492,1.59332l0.54773,0.12451C75.51038,10.73029,78.24896,11.42737,78.19916,15.03735z  M64.80499,11.92529c0,4.65558-2.66394,8.29047-7.26971,8.29047c-4.58093,0-7.26971-3.63489-7.26971-8.29047 c0-4.63068,2.68878-8.29047,7.26971-8.29047C62.14105,3.63483,64.80499,7.29462,64.80499,11.92529z M60.92114,11.92529 c0-2.46472-1.1452-4.48132-3.38586-4.48132s-3.36102,1.9917-3.36102,4.48132s1.12036,4.50623,3.36102,4.50623 S60.92114,14.43982,60.92114,11.92529z M87.06226,16.43152c-1.74274,0-3.56018-1.44397-3.56018-4.60583 c0-2.81323,1.69293-4.38171,3.46057-4.38171c1.39423,0,2.21576,0.64728,2.8631,1.76764l3.18671-2.11621 c-1.59338-2.41492-3.48547-3.43567-6.09961-3.43567c-4.78009,0-7.36926,3.70953-7.36926,8.19086 c0,4.70544,2.86304,8.39008,7.31946,8.39008c3.13696,0,4.63074-1.09546,6.24902-3.43567l-3.21167-2.16602 C89.25311,15.68463,88.55603,16.43152,87.06226,16.43152z M48.97095,15.46057c0,2.66388-2.43982,4.40662-4.92944,4.40662H35.9502 V4.0332h7.44397c2.8382,0,4.9046,1.44397,4.9046,4.35681c0.01666,1.43036-0.85675,2.72058-2.19086,3.23651 C46.10791,11.65143,48.97095,12.29877,48.97095,15.46057z M39.80914,10.25726h2.83813 c0.02155,0.00134,0.04309,0.00226,0.06464,0.00269c0.81476,0.01575,1.48804-0.6319,1.50385-1.44666 c0.00342-0.0567,0.00342-0.11353,0-0.17017c-0.047-0.77802-0.71576-1.37061-1.49377-1.32361h-2.88794L39.80914,10.25726z  M44.76349,14.98755c0-0.92114-0.67218-1.54358-2.09131-1.54358h-2.81323v3.11206h2.88794 C43.91699,16.55603,44.76349,16.13275,44.76349,14.98755z M103.64313,4.03326v5.82568H98.8382V4.03326h-4.15771v15.83398h4.15771 v-6.24896h4.80493v6.24896h4.15771V4.03326H103.64313z" />
                            <path id="bosch-logo-anker"
                                d="M12,0C5.37256,0,0,5.37256,0,12c0,6.62738,5.37256,12,12,12s12-5.37262,12-12C23.99646,5.37402,18.62598,0.00354,12,0z  M12,22.87964C5.99133,22.87964,1.12036,18.00867,1.12036,12S5.99133,1.1203,12,1.1203S22.87964,5.99133,22.87964,12 C22.87354,18.0061,18.0061,22.87354,12,22.87964z M19.50293,7.05475c-0.66852-1.01306-1.53552-1.88-2.54858-2.54852h-0.82159 v4.10785H7.89209V4.50623H7.04565c-4.13873,2.73114-5.27972,8.30029-2.54858,12.43896 c0.66852,1.01306,1.53552,1.88007,2.54858,2.54858h0.84644v-4.10791h8.24066v4.10791h0.82159 C21.09308,16.76257,22.23407,11.19348,19.50293,7.05475z M6.74689,17.87549c-3.24493-2.88354-3.5379-7.85168-0.65436-11.09668 c0.20508-0.23077,0.42358-0.44928,0.65436-0.65436V17.87549z M16.13275,14.24066H7.89209V9.73444h8.24066V14.24066z  M17.84827,17.25549c-0.18768,0.2088-0.38629,0.40747-0.59515,0.59509v-2.48962V8.61407V6.12445 C20.49121,9.03387,20.75763,14.0174,17.84827,17.25549z" />
                        </svg>
                    </a>
                    <div class="o-minimal-header__falafel">
                        <nav class="o-context-menu" aria-label="Context Menu Navigation undefined" aria-hidden="false">
                            <button type="button"
                                class="a-button a-button--integrated -without-label o-context-menu__trigger"
                                data-frok-action="open" aria-haspopup="true" aria-label="Open Context Menu">
                                <i class="a-icon a-button__icon boschicon-bosch-ic-options"></i>
                            </button>
                            <button type="button"
                                class="a-button a-button--integrated -without-label o-context-menu__trigger"
                                data-frok-action="close" aria-haspopup="false" aria-label="Close Context Menu">
                                <i class="a-icon a-button__icon boschicon-bosch-ic-close"></i>
                            </button>
                            <div class="m-popover">
                                <div class="a-box -floating">
                                    <div class="m-popover__content">
                                        <ul class="m-menu-group" role="menubar" aria-orientation="vertical">
                                            <li class="a-menu-item" role="none">
                                                <div class="a-menu-item__wrapper">
                                                    <button href="#" role="menuitem" class="a-menu-item__link"
                                                        id="smallLogoutButton">
                                                        <i class="a-icon boschicon-bosch-ic-my-brand-frame"></i>
                                                        <span class="a-menu-item__label">Log out</span>
                                                    </button>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                </div>
            </header>
            <nav class="m-side-navigation -contrast" aria-label="Side Navigation" aria-hidden="false">
                <div class="m-side-navigation__header">
                    <div class="m-side-navigation__header__label -size-l highlight">
                        Training Planner V1.00
                    </div>
                    <button type="button"
                        class="a-button a-button--integrated -without-label m-side-navigation__header__trigger -open"
                        aria-haspopup="false" aria-label="Open Side Navigation" tabindex="0">
                        <i class="a-icon a-button__icon boschicon-bosch-ic-list-view-mobile"></i>
                    </button>
                    <button type="button"
                        class="a-button a-button--integrated -without-label m-side-navigation__header__trigger -close"
                        aria-haspopup="false" aria-label="Close Side Navigation" tabindex="-1">
                        <i class="a-icon a-button__icon boschicon-bosch-ic-close"></i>
                    </button>
                </div>
                <ul class="m-menu-group" role="menubar" aria-orientation="vertical">
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                data-target="index.html"">
                <i class=" a-icon boschicon-bosch-ic-desktop-application-3d"></i>
                                <span class="a-menu-item__label">Home</span>
                            </a>
                        </div>
                    </li>
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="false"
                                aria-controls="group-id-1" aria-label="open group">
                                <i class="a-icon boschicon-bosch-ic-calendar-date-single"></i>
                                <span class="a-menu-item__label" data-i18n="event-menu"></span>
                                <i class="a-icon ui-ic-down-small"></i>
                            </button>
                        </div>
                        <ul id="group-id-1" class="m-menu-group__group" role="menu">
                            <li class="a-menu-item -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="view_event.html">
                                        <span class="a-menu-item__label" data-i18n="event-menu-1"></span>
                                    </a>
                                </div>
                            </li>
                            <li class="a-menu-item -disabled -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="true"
                                        tabindex="-1" data-target="new_event.html">
                                        <span class="a-menu-item__label" data-i18n="event-menu-2"></span>
                                    </a>
                                </div>
                            </li>
                            <li class="a-menu-item -disabled -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="update_event.html">
                                        <span class="a-menu-item__label" data-i18n="event-menu-3"></span>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="true"
                                tabindex="-1" aria-controls="group-id-2" aria-label="open group">
                                <i class="a-icon boschicon-bosch-ic-material-list"></i>
                                <span class="a-menu-item__label" data-i18n="resources-menu"></span>
                                <i class="a-icon ui-ic-down-small"></i>
                            </button>
                        </div>
                        <ul id="group-id-2" class="m-menu-group__group" role="menu">
                            <li class="a-menu-item -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="view_resources.html">
                                        <span class="a-menu-item__label" data-i18n="resources-menu-1"></span>
                                    </a>
                                </div>
                            </li>
                            <li class="a-menu-item -disabled -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="new_resources.html">
                                        <span class="a-menu-item__label" data-i18n="resources-menu-2"></span>
                                    </a>
                                </div>
                            </li>
                            <li class="a-menu-item -disabled -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="update_resources.html">
                                        <span class="a-menu-item__label" data-i18n="resources-menu-3"></span>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <button type="button" role="menuitem" class="a-menu-item__group" aria-disabled="false"
                                aria-controls="group-id-3" aria-label="open group">
                                <i class="a-icon boschicon-bosch-ic-message"></i>
                                <span class="a-menu-item__label" data-i18n="message-menu"></span>
                                <i class="a-icon ui-ic-down-small"></i>
                            </button>
                        </div>
                        <ul id="group-id-3" class="m-menu-group__group" role="menu">
                            <li class="a-menu-item -disabled -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="view_messages.html">
                                        <span class="a-menu-item__label" data-i18n="message-menu-1"></span>
                                    </a>
                                </div>
                            </li>
                            <li class="a-menu-item -indent" role="none">
                                <div class="a-menu-item__wrapper">
                                    <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                        data-target="reminders.html">
                                        <span class="a-menu-item__label" data-i18n="message-menu-2"></span>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                data-target="settings.html">
                                <i class="a-icon boschicon-bosch-ic-settings"></i>
                                <span class="a-menu-item__label" data-i18n="settings-link"></span>
                            </a>
                        </div>
                    </li>
                    <li class="a-menu-item -disabled" role="none">
                        <div class="a-menu-item__wrapper">
                            <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="true" tabindex="-1"
                                data-target="statistic.html">
                                <i class="a-icon boschicon-bosch-ic-chart-line"></i>
                                <span class="a-menu-item__label" data-i18n="statistics-link"></span>
                            </a>
                        </div>
                    </li>
                    <li class="a-menu-item" role="none">
                        <div class="a-menu-item__wrapper">
                            <a href="#" role="menuitem" class="a-menu-item__link" aria-disabled="false"
                                data-target="version.html"">
                <i class=" a-icon boschicon-bosch-ic-alert-info"></i>
                                <span class="a-menu-item__label" data-i18n="version-link"></span>
                            </a>
                        </div>
                    </li>
                </ul>
            </nav>
            <div class="e-container">
                <main style="padding-top: 6rem">
                    <div class="preview-single">
                        <div class="component-preview__details">
                            <div class="o-form" style="margin: 1rem 0;">
                                <form id="update-event-form" method="POST" autocomplete="off">
                                    <h3 data-i18n="ue-title"></h3>
                                    <h4 style="margin: 1.5rem 0 1.5rem;" data-i18n="ue-subtitle"></h4>
                                    <!-- Search event name -->
                                    <div class="">
                                        <div class="a-search-input"
                                            style="margin-bottom: 1rem; margin-top: 0.5rem; display: flex; align-items: center;">
                                            <input type="search" id="search-input-3" name="event suggestions"
                                                placeholder="Search" />
                                            <button type="submit" class="a-search-input__icon-search"
                                                aria-label="Event search">
                                                <i class="a-icon ui-ic-search"></i>
                                            </button>
                                            <button type="button" class="a-search-input__icon-close" title="Close">
                                                <i class="a-icon ui-ic-close-small"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <ul class="a-search-suggestions" style="width: 90%;margin: auto;">
                                        <!-- filled dynamically from JSON object-->
                                        <li class="a-search-suggestions__item a-search-suggestions__results-link">
                                            <div class="a-link -icon"
                                                style="display: flex; justify-content: space-between; width: 100%;">
                                                <button type="button"
                                                    class="a-button a-button--integrated -without-icon"
                                                    id="search_all_results_button">
                                                    <span class="a-button__label" data-i18n="ue-search-results"><span>
                                                            <i class="a-icon ui-ic-nosafe-lr-right-small"></i>
                                                        </span></span>
                                                </button>
                                                <button type="submit"
                                                    class="a-button a-button--integrated -without-icon"
                                                    id="search_close_button">
                                                    <span class="a-button__label" data-i18n="ue-search-close"></span>
                                                </button>
                                            </div>
                                        </li>
                                    </ul>
                                    <!-- Main event name-->
                                    <div class="o-form__row">
                                        <div class="m-form-field">
                                            <div class="a-text-field">
                                                <label for="event_name" data-i18n="ue-search-name"></label>
                                                <input type="text" id="event_name" readonly="" title="Event name"/>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Main event name-->
                                    <div class="o-form__row">
                                        <div class="m-form-field">
                                            <div class="a-text-field">
                                                <label for="event_name" data-i18n="ue-event-name"></label>
                                                <input type="text" id="event_name_2" readonly="" title="Even name (other)"/>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Main event details-->
                                    <div class="o-form__row">
                                        <div class="m-form-field -quarter">
                                            <div class="a-dropdown a-dropdown--disabled">
                                                <label for="event_type" data-i18n="ne-type"></label>
                                                <select id="event_type" aria-label="event_type">
                                                    <option value="" selected disabled data-i18n="ne-select_question"></option>
                                                    <option value="Training P" data-i18n="ne-tech-tr-pr"></option>
                                                    <option value="Training I" data-i18n="ne-tech-tr-int"></option>
                                                    <option value="Training O" data-i18n="ne-tech-tr-on"></option>
                                                    <option value="Seminar" data-i18n="ne-seminar"></option>
                                                    <option value="Congress" data-i18n="ne-congress"></option>
                                                    <option value="Content" data-i18n="ne-content"></option>
                                                    <option value="Event" data-i18n="ne-events"></option>
                                                    <option value="Event other" data-i18n="ne-eventsother"></option>
                                                    <option value="Other" data-i18n="ne-other"></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="m-form-field -quarter">
                                            <div class="a-text-field">
                                                <label for="other_event_type" data-i18n="ne-type-other"></label>
                                                <input type="text" id="other_event_type" disabled="" title="Other event type"/>
                                            </div>
                                        </div>
                                        <div class="m-form-field -quarter">
                                            <div class="a-date-input">
                                                <label for="start_date" data-i18n="ne-start-date"></label>
                                                <input type="date" id="start_date" name="start_date" value="" title="Event start date"/>
                                                <button type="button" class="a-date-input__button"
                                                    aria-label="open dialog">
                                                    <i class="a-icon boschicon-bosch-ic-calendar-clock"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="m-form-field -quarter">
                                            <div class="a-date-input">
                                                <label for="end_date" data-i18n="ne-end-date"></label>
                                                <input type="date" id="end_date" name="end_date" value="" title="Event end date"/>
                                                <button type="button" class="a-date-input__button"
                                                    aria-label="open dialog">
                                                    <i class="a-icon boschicon-bosch-ic-calendar-clock"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- End of main event details-->
                                    <h3 style="margin-top: 1rem;" data-i18n="ne-resources-title"></h3>
                                    <h4 style="margin: 1.5rem 0 1.5rem;" data-i18n="ne-areas"></h4>
                                    <div class="o-form__row">
                                        <div id="checkbox_container_areas" class="check_box_container check_box_area">
                                            <!-- Fill div with checkboxes dynamically-->
                                        </div>
                                    </div>
                                    <h4 style="margin: 2rem 0 1.5rem;" data-i18n="ne-trainers"></h4>
                                    <div class="o-form__row">
                                        <div id="checkbox_container_trainers"
                                            class="check_box_container check_box_trainers">
                                            <!-- Fill div with checkboxes dynamically-->
                                        </div>
                                    </div>
                                    <h4 style="margin: 2rem 0 1.5rem;" data-i18n="ne-vehicles"></h4>
                                    <div class="o-form__row">
                                        <div id="checkbox_container_vehicles"
                                            class="check_box_container check_box_vehicles">
                                            <!-- Fill div with checkboxes dynamically-->
                                        </div>
                                    </div>
                                    <h4 style="margin: 2rem 0 1.5rem;" data-i18n="ne-equipment"></h4>
                                    <div class="o-form__row">
                                        <div id="checkbox_container_equipment"
                                            class="check_box_container check_box_equipment">
                                            <!-- Fill div with checkboxes dynamically-->
                                        </div>
                                    </div>
                                    <h4 style="margin: 2rem 0 1.5rem;" data-i18n="ne-multimedia"></h4>
                                    <div class="o-form__row">
                                        <div id="checkbox_container_multimedia"
                                            class="check_box_container check_box_multimedia">
                                            <!-- Fill div with checkboxes dynamically-->
                                        </div>
                                    </div>
                                    <h4 style="margin: 2rem 0 1.5rem;" data-i18n="ne-workstation"></h4>
                                    <div class="o-form__row">
                                        <div id="checkbox_container_workstations"
                                            class="check_box_container check_box_workstations">
                                            <!-- Fill div with checkboxes dynamically-->
                                        </div>
                                    </div>
                                    <h3 style="margin-top: 3rem;" data-i18n="ne-status-select"></h3>
                                    <h4 style="margin: 1.5rem 0 1.5rem;" data-i18n="ue-status-update"></h4>
                                    <div class="o-form__row">
                                        <div class="m-form-field -quarter">
                                            <div class="a-dropdown">
                                                <label for="event_status" data-i18n="ne-status-select"></label>
                                                <select id="event_status" aria-label="Event status">
                                                    <option value="Reserved" data-i18n="ne-select-reserved"></option>
                                                    <option value="Confirmed" data-i18n="ne-select-confirmed"></option>
                                                    <option value="Cancelled" data-i18n="ue-cancelled"></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="m-form-field -quarter">
                                            <div class="a-date-input">
                                                <label for="date-input-2" data-i18n="ue-confirm-days"></label>
                                                <input type="date" id="date-input-2" name="input date readonly"
                                                    placeholder="MM/DD/YYYY" readonly="" value="" />
                                                <button type="button" class="a-date-input__button"
                                                    aria-label="open dialog">
                                                    <i class="a-icon boschicon-bosch-ic-calendar-clock"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <h3 style="margin-top: 3rem;" data-i18n="ue-button-command"></h3>
                                    <div class="o-form__row">
                                        <div class="check_resources"
                                            style="display: flex; width: 100%; height: auto; gap:75px; justify-content: center; margin-top: 50px;">
                                            <button type="button" id="submit-confirm-button"
                                                class="a-button a-button--primary -without-icon" style="width: 150px;" title="Confirm">
                                                <span class="a-button__label" style="padding-right: 0.75rem;" data-i18n="ue-confirm-button"></span>
                                            </button>
                                            <button type="submit" id="submit-update-button"
                                                class="a-button a-button--primary -without-icon" style="width: 150px;"title="Update">
                                                <span class="a-button__label" style="padding-right: 0.75rem;" data-i18n="ue-update button"></span>
                                            </button> <!--changed from submit-event-button review script-->
                                            <button type="button" id="submit-participant-button"
                                                class="a-button a-button--primary -without-icon" style="width: 155px;" title="Participants">
                                                <span class=" a-button__label" style="padding-right: 0.75rem;" data-i18n="ue-part-button"></span>
                                            </button>
                                            <button type="button" id="submit-close-button"
                                                class="a-button a-button--primary -without-icon" style="width: 150px;" title="Close">
                                                <span class="a-button__label" style="padding-right: 0.75rem;" data-i18n="ue-search-close"></span>
                                            </button><!--changed from submit-event-button review script-->
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </main>
                <!-- participant dialog-->
                <dialog class="m-dialog -floating-shadow-s -floating" id="participant-dialog-info"
                    aria-labelledby="dialog-default-dialog-without-header-title"
                    style="margin: auto; width: 350px; text-align: center;">
                    <div class="m-dialog__content">
                        <div class="m-dialog__headline">
                            Update participant registration
                        </div>
                        <div class="m-dialog__body">
                            <div class="m-form-field -quarter">
                                <div class="a-value-modificator">
                                    <input type="number" id="participantValue" name="participant_value" min="0" max="20"
                                        step="1" style="text-align: center;" />
                                    <button type="button" class="a-value-modificator__minus-button" aria-label="Minus">
                                        <i class="a-icon boschicon-bosch-ic-less-minimize"></i>
                                    </button>
                                    <button type="button" class="a-value-modificator__plus-button" aria-label="Plus">
                                        <i class="a-icon boschicon-bosch-ic-add"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="m-dialog__actions" style="justify-self: center; gap: 40px;">
                            <button type="button" class="a-button a-button--primary -without-icon"
                                id="participantConfirm">
                                <span class="a-button__label" style="padding-right: 0.75rem;">Confirm</span>
                            </button>
                            <button type="button" class="a-button a-button--secondary -without-icon"
                                id="participantCancel">
                                <span class="a-button__label">Cancel</span>
                            </button>
                        </div>
                    </div>
                </dialog>
                <!-- End of participant dialog-->
                <!-- close event dialog-->
                <dialog class="m-dialog -floating-shadow-s -floating" id="close-event-dialog-info"
                    aria-labelledby="dialog-default-dialog-without-header-title"
                    style="margin: auto; width: 350px; text-align: center;">
                    <div class="m-dialog__content">
                        <div class="m-dialog__headline">
                            Close event
                        </div>
                        <div class="m-dialog__body">
                            <div class="m-form-field -quarter">
                                <div class="a-value-modificator">
                                    <label for="final_participants">Participant total</label>
                                    <input type="number" id="totalParticipantValue" name="total_participant_value"
                                        min="0" max="20" step="1" style="text-align: center;" />
                                    <button type="button" class="a-value-modificator__minus-button" aria-label="Minus">
                                        <i class="a-icon boschicon-bosch-ic-less-minimize"></i>
                                    </button>
                                    <button type="button" class="a-value-modificator__plus-button" aria-label="Plus">
                                        <i class="a-icon boschicon-bosch-ic-add"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="m-dialog__actions" style="justify-self: center; gap: 40px;">
                            <button type="button" class="a-button a-button--primary -without-icon"
                                id="closeEventConfirm">
                                <span class="a-button__label" style="padding-right: 0.75rem;">Confirm</span>
                            </button>
                            <button type="button" class="a-button a-button--secondary -without-icon"
                                id="closeEventCancel">
                                <span class="a-button__label">Cancel</span>
                            </button>
                        </div>
                    </div>
                </dialog>
                <!-- End of close event dialog-->
            </div>
        </div>
    </div>
    <script src="../js/script.js"></script>
    <script type="module">
        import { setLanguage, updateLanguage, setTheme, updateUsernameDisplay, logOut, updateNavMenu, navigationMenu, debounce, getNotificationContainer, showPersistentNotification, hidePersistentNotification, showNotification } from '../js/common.js';
        setLanguage();
        setTheme();
        updateUsernameDisplay();
        updateUsernameDisplay();
        updateNavMenu();
        navigationMenu();

        document.getElementById('logoutButton').addEventListener('click', logOut);
        document.getElementById('smallLogoutButton').addEventListener('click', logOut);
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            loadUpdateEventData();
            initializeSearchSuggestions();
            initializeDialogs();
            loadRoomsData();
            loadTrainersData();
            loadVehiclesData();
            loadEquipmentData();
            loadMultimediaData();
            loadWorkstationData();
        })

        //-----UPDATE MAIN VARIABLES--------- 
        let eventData = [];
        let targetEventId;
        let blockedResources = [];
        let unavailableResources = [];
        let actualResources = [];
        let updateStartDate;
        let updateEndDate;
        let combinedResources = [];
        let toDeleteResources = [];
        let toIncludeResources = [];
        let targetEventName = '';

        //----- HELPER FUNCTIONS ----------
        /**
                * Format date from ISO standard 
                * 1. format date to standard to export to db.js (yyyy-mm-dd).
                * 2. 
                *
                * @param {DATE (ISO)} Date
                * @param {PaDATE} 
                */
        function formatDate(date) {
            const d = new Date(date);
            return d.toISOString().split("T")[0];
        }


        //------ INITIALIZE DIALOGS-------

        function initializeDialogs() {
            const participantDialogButton = document.getElementById('submit-participant-button');
            const closeEventDialogButton = document.getElementById('submit-close-button');
            const participantDialog = document.getElementById('participant-dialog-info');
            const closeEventDialog = document.getElementById('close-event-dialog-info');
            const participantCancelButton = document.getElementById('participantCancel');
            const closeEventButton = document.getElementById('closeEventCancel');
            const participantConfirmButton = document.getElementById('participantConfirm');
            const closeEventConfirm = document.getElementById('closeEventConfirm');

            participantDialogButton?.addEventListener('click', () => participantDialog.showModal());

            participantCancelButton?.addEventListener('click', () => participantDialog.close());

            participantConfirmButton?.addEventListener('click', function () {
                const participantNumber = document.getElementById('participantValue').value.trim();
                participantDialog.close();
                if (!targetEventId || targetEventId === null) {
                    showNotification('Select an event to update registered participants.')
                } else {
                    updateParticipant(participantNumber, targetEventId);
                }
            });

            closeEventDialogButton?.addEventListener('click', () => closeEventDialog.showModal());

            closeEventButton?.addEventListener('click', () => closeEventDialog.close());

            closeEventConfirm?.addEventListener('click', function () {
                const totalParticipant = document.getElementById('totalParticipantValue').value.trim();
                closeEventDialog.close();
                if (!targetEventId || targetEventId === null) {
                    showNotification('Select an event to close.');
                } else {
                    closeEvent(totalParticipant, targetEventId);
                }
            });
        }

        //------ END OF DIALOG INITIALIZATION---------

        // ===== UPDATE_EVENT.HTML: FUNCTIONS TO LOAD TRAINING DATA =====

        /**
         * Load event data from db on DOMContentload 
         * 1. load event data to populate search suggestions.
         * 2. Populate search suggestion for event data.
         * 3. ".
         *
         * @param {none}
         */
        async function loadUpdateEventData() {
            const trainingEvent = await window.api.getUpdateEventData();
            if (trainingEvent) {
                eventData = trainingEvent;
            } else {
                console.log('Unable to retrieve event information');
            }
        }

        /**
        * Initialize data load on search suggestion
        * 1. Trigger populate search box on 3 digit input
        * 2. if input is not ok, trigger select all
        * 3. 
        *
        * @param {none}
        */
        function initializeSearchSuggestions() {
            const searchInput = document.getElementById("search-input-3");

            searchInput.addEventListener("input", function () {
                const query = this.value;

                // Only search when at least 3 characters are typed
                if (query.length >= 3) {
                    const filteredData = eventData.filter(item =>
                        item.event_name.toLowerCase().includes(query.toLowerCase())
                    );
                    populateSuggestions(filteredData);
                    targetEventId = null;
                    blockedResources = [];
                    actualResources = [];
                    unavailableResources = [];
                    updateStartDate = null;
                    updateEndDate = null;
                    combinedResources = [];
                    toDeleteResources = [];
                    toIncludeResources = [];
                    targetEventName = '';
                    resetResourceStyles();

                } else {
                    // Hide suggestions if less than 3 characters
                    document.querySelector(".a-search-suggestions").style.display = "none";
                }
            });
        }

        /**
        * Display event data from db on search field
        * 1. Populate search box based on input.
        * 2. on selection, populate basic data fields
        * 3. 
        *
        * @param {data} input event data
        */
        function populateSuggestions(data) {
            const suggestionsList = document.querySelector(".a-search-suggestions");
            // Clear only dynamically generated items, keeping the last <li> with buttons
            const dynamicItems = suggestionsList.querySelectorAll(
                ".a-search-suggestions__item:not(.a-search-suggestions__results-link)");
            dynamicItems.forEach(item => item.remove());

            const buttonsLi = suggestionsList.querySelector(".a-search-suggestions__results-link"); //a-search-suggestions__item a-search-suggestions__results-link

            // Check if there are matches
            if (data.length === 0) {
                // Create a new <li> for "No matches found"
                const noMatchesLi = document.createElement("li");
                noMatchesLi.className = "a-search-suggestions__item no-matches";
                noMatchesLi.textContent = "No matches found.";

                // Append the "No matches found" <li> before the buttons
                suggestionsList.insertBefore(noMatchesLi, buttonsLi);
            } else {
                // Dynamically generate the new <li> elements based on search results
                data.forEach(item => {
                    const li = document.createElement("li");
                    li.className = "a-search-suggestions__item";

                    const button = document.createElement("button");
                    button.className = "a-button a-button--integrated -without-icon";
                    button.innerHTML = `${item.event_id} - ${highlightMatch(item.event_name)} - ${formatDate(item.event_start_date)} - ${formatDate(item.event_end_date)}`;

                    // On click, fill in the event name field and hide suggestions
                    button.addEventListener("click", (event) => {
                        event.preventDefault();
                        targetEventId = item.event_id;
                        targetEventName = item.event_name;
                        getEventResourceData(`${item.event_id}`, item.event_start_date, item.event_end_date);
                        //getBlockedResourceData(item.event_start_date, item.event_end_date);
                        document.getElementById("event_name").value = `${item.event_id} - ${item.event_name}`;
                        document.getElementById("event_name_2").value = `${item.event_name_other}`;
                        document.getElementById("event_type").value = `${item.event_type}`;
                        document.getElementById("other_event_type").value = `${item.event_type_other}`;
                        document.getElementById("start_date").value = `${formatDate(item.event_start_date)}`;
                        document.getElementById("end_date").value = `${formatDate(item.event_end_date)}`;
                        document.getElementById("date-input-2").value = `${formatDate(item.event_confirmation_deadline)}`;
                        if (item.event_status === "Reserved" || item.event_status === "Confirmed") {
                            // Finds the option element with the matching value within the select element
                            var option = document.querySelector('#event_status option[value="' + item.event_status + '"]');
                            if (option) {
                                option.selected = true;
                                option.disabled = true;
                            }
                        }
                        const searchInput = document.getElementById("search-input-3").value = "";
                        suggestionsList.style.display = "none"; // Hide after selection
                    });

                    li.appendChild(button);
                    suggestionsList.insertBefore(li, buttonsLi);
                });
            }
            // Show the suggestions list
            suggestionsList.style.display = "block";

            const showall = document.getElementById('search_all_results_button');
            const closeall = document.getElementById('search_close_button')

            showall.addEventListener('click', function () {
                populateSuggestions(eventData);
            });

            closeall.addEventListener('click', function () {
                suggestionsList.style.display = "none"; // Hide suggestions
            });
        }

        /**
        * Highlight 3 digit input on event name
        * 1. take initial input digits.
        * 2. highlight input on displayed options
        * 3. 
        *
        * @param {name} input event name
        */
        function highlightMatch(name) {
            const query = document.getElementById("search-input-3").value;
            const regex = new RegExp(`(${query})`, "gi");
            return name.replace(regex, '<em>$1</em>');
        }

        /**
       * Function to create checkboxes 
       * 1. Based of resources on db
       * 2. locate checkboxes on specific cont
       * 3. 
       *
       * @param {containerId, data, checkboxGroupName, labelField} input 
       * @Param {checkboxes} Output
       */
        function createCheckboxesFromData(containerId, data, checkboxGroupName, labelField) {
            const checkboxContainer = document.getElementById(containerId);

            // Clear any existing content in the container
            checkboxContainer.innerHTML = '';

            // Loop through each item in the data array and create a checkbox for each one
            data.forEach((item, index) => {
                // Create a div for each checkbox
                const checkboxDiv = document.createElement('div');
                checkboxDiv.classList.add('a-checkbox');

                // Create the checkbox input element
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `${checkboxGroupName}-checkbox-${index + 1}`; // Unique ID
                checkbox.name = `${checkboxGroupName}[]`; // Group name for form submission
                checkbox.value = item.resource_id; // Use the item name as the value
                checkbox.dataset.resourceName = item[labelField]; // Store the resource name in a data attribute

                // Create the label for the checkbox
                const label = document.createElement('label');
                label.setAttribute('for', checkbox.id); // Set 'for' to match the checkbox ID
                label.innerText = item[labelField]; // Use the item name as the label text

                // Append the checkbox and label to the checkbox div
                checkboxDiv.appendChild(checkbox);
                checkboxDiv.appendChild(label);

                // Append the checkbox div to the container
                checkboxContainer.appendChild(checkboxDiv);
            });
        }

        /**
       * Fetch data from db
       * 1. fetch room data 
       * 2. Segregate data by resource_id
       * 3. 
       *
       * @param {none} input 
       * @Param {room data} Output
       */
        async function loadRoomsData() {
            const roomData = await window.api.getEventRoomData();
            if (roomData) {
                createCheckboxesFromData('checkbox_container_areas', roomData, 'area', 'room_name');
            } else {
                console.log('Unable to retrieve event Room information');
            }
        }

        /**
       * Fetch data from db
       * 1. fetch trainer data 
       * 2. Segregate data by resource_id
       * 3. 
       *
       * @param {none} input 
       * @Param {trainer data} Output
       */
        async function loadTrainersData() {
            const trainersData = await window.api.getEventTrainerData();
            if (trainersData) {
                createCheckboxesFromData('checkbox_container_trainers', trainersData, 'trainers', 'trainer_name');
            } else {
                console.log('Unable to retrieve training information');
            }
        }

        /**
       * Fetch data from db
       * 1. fetch vehicle data 
       * 2. Segregate data by resource_id
       * 3. 
       *
       * @param {none} input 
       * @Param {vehicle data} Output
       */
        async function loadVehiclesData() {
            const vehiclesData = await window.api.getEventVehicleData();
            if (vehiclesData) {
                createCheckboxesFromData('checkbox_container_vehicles', vehiclesData, 'vehicles', 'Name');
            } else {
                console.log('Unable to retrieve event vehicles information');
            }
        }

        /**
       * Fetch data from db
       * 1. fetch equipment data 
       * 2. Segregate data by resource_id
       * 3. 
       *
       * @param {none} input 
       * @Param {equipment data} Output
       */
        async function loadEquipmentData() {
            const equipmentData = await window.api.getEventEquipmentData();
            if (equipmentData) {
                createCheckboxesFromData('checkbox_container_equipment', equipmentData, 'equipment', 'equipment_name');
            } else {
                console.log('Unable to retrieve event equipment information');
            }
        }

        /**
       * Fetch data from db
       * 1. fetch workstation data 
       * 2. Segregate data by resource_id
       * 3. 
       *
       * @param {none} input 
       * @Param {workstation data} Output
       */
        async function loadWorkstationData() {
            const workstationData = await window.api.getEventWorkstationData();
            if (workstationData) {
                createCheckboxesFromData('checkbox_container_workstations', workstationData, 'workstations', 'workstation_name');
            } else {
                console.log('Unable to retrieve event workstation information');
            }
        }

        /**
       * Fetch data from db
       * 1. fetch multimedia data 
       * 2. Segregate data by resource_id
       * 3. 
       *
       * @param {none} input 
       * @Param {multimedia data} Output
       */
        async function loadMultimediaData() {
            const multimediaData = await window.api.getEventMultimediaData();
            if (multimediaData) {
                createCheckboxesFromData('checkbox_container_multimedia', multimediaData, 'multimedia', 'multimedia_name');
            } else {
                console.log('Unable to retrieve event multimedia information');
            }
        }



        // ------UPDATE_EVENT.HTML / CONFIRM OR CANCEL EVENT ACTIONS---------

        /**
         *  Confirm or cancel event action
         *  1. Update db tables
         *  2. Confirm reserved status on event, resource status history
         *  3. Delete event, reserved status on event, resource status history
         * 
         * @Param {eventId, event resources} input
         * @Param (none) output
         */
        document.getElementById('submit-confirm-button').addEventListener('click', async function () {
            const confirmation = document.getElementById('event_status').value.trim();

            if (!confirmation || confirmation === "Reserved") {
                showNotification("Event status must be set to 'Cancelled' or 'Confirmed'");
            }

            if (confirmation === "Confirmed") {
                showPersistentNotification("Updating event...", "loading");
                try {
                    const result = await window.api.confirmEvent(targetEventId);
                    hidePersistentNotification();
                    if (result.success) {
                        showNotification(result.message);
                        targetEventId = null;
                        setTimeout(() => {
                            window.location.href = 'view_event.html'; // Redirect to the resources page
                        }, 2000);
                    } else {
                        console.error('Error updating event:', result.message);
                        showNotification(`Error: ${result.message}`, 'error');
                    }
                } catch (error) {
                    console.error('Unexpected error:', error);
                    hidePersistentNotification();
                    showNotification('An unexpected error occurred. Please try again.');
                }
            } else if (confirmation === "Cancelled") {
                showPersistentNotification("Cancelling event...", "info");
                try {
                    const result = await window.api.cancelEvent(targetEventId);
                    hidePersistentNotification();
                    if (result.success) {
                        showNotification(result.message);
                        targetEventId = null;
                        setTimeout(() => {
                            window.location.href = 'view_event.html'; // Redirect to the resources page
                        }, 2000);
                    } else {
                        console.error('Error cancelling event:', result.message);
                        showNotification(`Error: ${result.message}`, 'error');
                    }
                } catch (error) {
                    console.error('Unexpected error:', error);
                    hidePersistentNotification();
                    showNotification('An unexpected error occurred. Please try again.');
                }
            } else {
                return;
            }
        });

        /**
       *  Update  registered participants action
       *  1. Update db participants
       *  2. include participant numbers
       *  
       * 
       * @Param {eventId, event resources} input
       * @Param (none) output
       */
        async function updateParticipant(participants, eventId) {
            showPersistentNotification("Updating registered participants...", "info");
            try {
                const result = await window.api.updateParticipants(participants, eventId);
                hidePersistentNotification();
                if (result.success) {
                    showNotification(result.message);
                    setTimeout(() => {
                        window.location.href = 'update_event.html'; // Redirect to the resources page
                    }, 2000);
                } else {
                    console.error('Error updating participant registration: ', result.message);
                    showNotification(`Error: ${result.message}`, 'error');
                }
            } catch (error) {
                console.error('Unexpected error:', error);
                hidePersistentNotification();
                showNotification('An unexpected error occurred. Please try again.');
            }
        }

        /**
       *  Close event action
       *  1. Update db events
       *  2. Set event to closed 
       *  3. update the final number of participants
       *  
       * 
       * @Param {eventId, event resources} input
       * @Param (none) output
       */
        async function closeEvent(participants, eventId) {
            const confirmation = document.getElementById('event_status').value.trim();

            if (!confirmation || confirmation === "Reserved") {
                showNotification("Event status must be set to 'Confirmed'");
            }

            if (confirmation === "Confirmed") {
                showPersistentNotification("Updating event status to finished...", "info");
                try {
                    const result = await window.api.endEvent(participants, eventId);
                    hidePersistentNotification();
                    if (result.success) {
                        showNotification(result.message);
                        setTimeout(() => {
                            window.location.href = 'update_event.html'; // Redirect to the resources page
                        }, 2000);
                    } else {
                        console.error('Error updating event closure: ', result.message);
                        showNotification(`Error: ${result.message}`, 'error');
                    }
                } catch (error) {
                    console.error('Unexpected error:', error);
                    hidePersistentNotification();
                    showNotification('An unexpected error occurred. Please try again.');
                }
            }
        }


        // ---------UPDATE_EVENT.HTML: END OF CONFIRM OR CANCEL EVENT FUNCTIONS-----------


        // ===== UPDATE_EVENT.HTML: FUNCTIONS TO UPDATE EVENT DATA-------


        /**
         * Get selected checkboxes
         * 1. create an array with selected checkboxes.
         * 2. Populate search suggestion for event data.
         * 3. ".
         *
         * @param {containerId, checkboxGroupNam} input
         * @Param{resource_id, resourceName} Output type:Array
         */
        function getSelectedCheckboxes(containerId, checkboxGroupName) {
            const checkboxes = document.querySelectorAll(`#${containerId} input[name="${checkboxGroupName}[]"]:checked`);
            return Array.from(checkboxes).map(checkbox => Number(checkbox.value.trim()));
        }

        //form submission with selected event data 
        document.getElementById('update-event-form').addEventListener('submit', async function (event) {
            event.preventDefault(); // Prevent default form submission

            // Retrieve selected checkboxes for each resource type
            const selectedRooms = getSelectedCheckboxes('checkbox_container_areas', 'area');
            const selectedTrainers = getSelectedCheckboxes('checkbox_container_trainers', 'trainers');
            const selectedVehicles = getSelectedCheckboxes('checkbox_container_vehicles', 'vehicles');
            const selectedEquipment = getSelectedCheckboxes('checkbox_container_equipment', 'equipment');
            const selectedMultimedia = getSelectedCheckboxes('checkbox_container_multimedia', 'multimedia');
            const selectedWorkstations = getSelectedCheckboxes('checkbox_container_workstations', 'workstations');
            const user = localStorage.getItem('userName');

            const missingFields = [];
            if (!selectedRooms || selectedRooms.length === 0) missingFields.push('Event areas');
            if (!selectedTrainers || selectedTrainers.length === 0) missingFields.push('Event trainers');
            // Validate date logic
            if (missingFields.length > 0) {
                showNotification('Please fill in the following required fields:\n' + missingFields.join('\n'));
                return;
            }
            // Construct the payload to send to the server
            combinedResources = [].concat(
                selectedEquipment,
                selectedTrainers,
                selectedVehicles,
                selectedRooms,
                selectedMultimedia,
                selectedWorkstations,
            );

            toDeleteResources = actualResources.filter(item => !combinedResources.includes(item));
            toIncludeResources = combinedResources.filter(item => !actualResources.includes(item));

            console.log('actual res: ', actualResources);
            console.log('blocked res: ', blockedResources);
            console.log('Unavailable res: ', unavailableResources);
            console.log('Submitting event:', combinedResources);
            console.log('resources to delete: ', toDeleteResources);
            console.log('to include resources: ', toIncludeResources);
            console.log('event star date: ', updateStartDate);
            console.log('event end date: ', updateEndDate);
            console.log('event_id: ', targetEventId);

            // Show a persistent "loading" notification.
            showPersistentNotification("Updating event...", "loading");


            try {
                const result = await window.api.replaceEventResources(targetEventId, targetEventName, updateStartDate, updateEndDate, toDeleteResources, toIncludeResources);
                hidePersistentNotification();
                if (result.success) {
                    showNotification(`Event updated successfully! ID: ${result.targetEventId}`);
                    targetEventId = null;
                    blockedResources = [];
                    actualResources = [];
                    unavailableResources = [];
                    updateStartDate = null;
                    updateEndDate = null;
                    combinedResources = [];
                    toDeleteResources = [];
                    toIncludeResources = [];
                    resetResourceStyles();
                    setTimeout(() => {
                        window.location.href = 'update_event.html'; // Redirect to the resources page
                    }, 2000);
                } else {
                    console.error('Error updating event:', result.message);
                    showNotification(`Error: ${result.message}`, 'error');
                }
            } catch (error) {
                console.error('Unexpected error:', error);
                hidePersistentNotification();
                showNotification('An unexpected error occurred. Please try again.');
            }
        });


        /**
         * Function to call event resources
         * 1. Fetch event resources from db.
         * 2. call to populate checkboxes.
         * 3. 
         *
         * @param {eventId} input
         * @Param{none} Output type:
         */
        async function getEventResourceData(eventId, startDate, endDate) {
            try {
                const resourcesIds = await window.api.getEventResources(eventId);
                const resourceIdValues = resourcesIds.map(resource => resource.resource_id);
                actualResources = resourceIdValues;

                const blockedEventResources = await window.api.getReservedResources(formatDate(startDate), formatDate(endDate));
                const mapedEventResources = blockedEventResources.map(resource => resource.resource_id);
                blockedResources = mapedEventResources;

                unavailableResources = blockedResources.filter(item => !actualResources.includes(item));

                updateStartDate = formatDate(startDate);
                updateEndDate = formatDate(endDate);

                if (resourcesIds) {
                    selectCheckboxesByResourceIds('checkbox_container_areas', 'area', actualResources);
                    selectCheckboxesByResourceIds('checkbox_container_trainers', 'trainers', actualResources);
                    selectCheckboxesByResourceIds('checkbox_container_vehicles', 'vehicles', actualResources);
                    selectCheckboxesByResourceIds('checkbox_container_equipment', 'equipment', actualResources);
                    selectCheckboxesByResourceIds('checkbox_container_multimedia', 'multimedia', actualResources);
                    selectCheckboxesByResourceIds('checkbox_container_workstations', 'workstations', actualResources);
                } else {
                    console.log('Unable to retrieve event resources information');
                }

                if (unavailableResources) {
                    selectCheckboxesByUnavailableResourceIds('checkbox_container_areas', 'area', unavailableResources);
                    selectCheckboxesByUnavailableResourceIds('checkbox_container_trainers', 'trainers', unavailableResources);
                    selectCheckboxesByUnavailableResourceIds('checkbox_container_vehicles', 'vehicles', unavailableResources);
                    selectCheckboxesByUnavailableResourceIds('checkbox_container_equipment', 'equipment', unavailableResources);
                    selectCheckboxesByUnavailableResourceIds('checkbox_container_multimedia', 'multimedia', unavailableResources);
                    selectCheckboxesByUnavailableResourceIds('checkbox_container_workstations', 'workstations', unavailableResources);
                } else {
                    console.log('Unable to retrieve blocked event resources information')
                }
            } catch (error) {
                console.error('Error filling update event fields:', error);
            }
        }

        /**
         * Function to check checkboxes
         * 1. Add check status to checkboxes.
         * 2. PChange checkbox style.
         * 3. Based on event reserved resource (resource_id)
         *
         * @param {containerId, checkboxGroupName, resourceIds} input
         * @Param{checked checkbox} Output type:CSS style
         */
        function selectCheckboxesByResourceIds(containerId, checkboxGroupName, resourceIds) {
            // Get all checkboxes in the specified container
            const checkboxes = document.querySelectorAll(`#${containerId} input[name="${checkboxGroupName}[]"]`);

            // Map each resource to a number
            const extractedResourceIds = resourceIds.map(resource => {
                // If resource is an object with a resource_id property, use that.
                if (resource && typeof resource === "object" && resource.resource_id !== undefined) {
                    return Number(resource.resource_id);
                } else {
                    // Otherwise, assume resource is already a number (or a string that can be converted)
                    return Number(resource);
                }
            });

            // Iterate over each checkbox and check if its value exists in extractedResourceIds
            checkboxes.forEach(checkbox => {
                // Convert the checkbox value to a number
                const checkboxValue = Number(checkbox.value.trim());

                if (extractedResourceIds.includes(checkboxValue)) {
                    checkbox.checked = true;
                } else {
                    checkbox.checked = false;
                }
            });
        }

        /**
         * Function to check checkboxes
         * 1. change checkbox style for unavailable resources
         * 2. Change checkbox style.
         * 3. Based on general reserved resource (resource_id)
         *
         * @param {containerId, checkboxGroupName, resourceIds} input
         * @Param{checked checkbox} Output type:CSS style
         */
        //Function to disable checkboxes and change style for unabailable resources
        function selectCheckboxesByUnavailableResourceIds(containerId, checkboxGroupName, resourceIds) {
            // Get all checkboxes in the specified container
            const checkboxes = document.querySelectorAll(`#${containerId} input[name="${checkboxGroupName}[]"]`);

            // Map each resource to a number
            const extractedResourceIds = resourceIds.map(resource => {
                // If resource is an object with a resource_id property, use that.
                if (resource && typeof resource === "object" && resource.resource_id !== undefined) {
                    return Number(resource.resource_id);
                } else {
                    // Otherwise, assume resource is already a number (or a string that can be converted)
                    return Number(resource);
                }
            });

            // Iterate over each checkbox and check if its value exists in extractedResourceIds
            checkboxes.forEach(checkbox => {
                // Convert the checkbox value to a number
                const checkboxValue = Number(checkbox.value.trim());

                if (extractedResourceIds.includes(checkboxValue)) {
                    checkbox.setAttribute('disabled', "");
                    const label = document.querySelector(`label[for="${checkbox.id}"]`);
                    // Do something with the label, e.g., change its text color
                    if (label) {
                        label.style.color = 'Red';
                    }
                }
            });
        }

        /**
         * Function to reset checkboxes style
         * 1. Reset checkbox style on reload.
         * 2. Reset checkbox style on submit.
         * 3. Reset checkbox style on other functions.
         *
         * @param {containerId, checkboxGroupName, resourceIds} input
         * @Param{checked checkbox} Output type:CSS style
         */
        // resent checkbox selection for a new query
        function resetResourceStyles() {
            // List the container IDs that hold checkboxes
            const containerIds = [
                'checkbox_container_areas',
                'checkbox_container_trainers',
                'checkbox_container_vehicles',
                'checkbox_container_equipment',
                'checkbox_container_multimedia',
                'checkbox_container_workstations'
            ];

            containerIds.forEach(id => {
                // Get all checkboxes in the container
                const checkboxes = document.querySelectorAll(`#${id} input[type="checkbox"]`);
                checkboxes.forEach(checkbox => {
                    // Remove the disabled attribute
                    checkbox.removeAttribute('disabled');
                    // Reset any inline styling on the checkbox or its label
                    // (Assuming your labels use a "for" attribute that matches the checkbox's id)
                    const label = document.querySelector(`label[for="${checkbox.id}"]`);
                    if (label) {
                        label.style.color = ''; // reset to default (or set a default color)
                    }
                });
            });
        }


        // ===== UPDATE_EVENT.HTML: END OF FUNCTIONS TO UPDATE EVENT DATA =====

    </script>
</body>

</html>